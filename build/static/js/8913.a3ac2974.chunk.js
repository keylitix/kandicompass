"use strict";(self.webpackChunkfacit=self.webpackChunkfacit||[]).push([[8913],{26718:(e,s,i)=>{i.d(s,{Ay:()=>o,CQ:()=>d,li:()=>c});i(65043);var a=i(47819),l=i(45016),r=i(12528),t=i(51399),n=i(70579);const d={3:3,5:5,10:10,25:25,50:50},c=(e,s,i)=>e.filter(((e,a)=>a+1>(s-1)*i&&a+1<=s*i)),o=e=>{let{setCurrentPage:s,currentPage:i,perPage:c,setPerPage:o,data:h,label:m="items"}=e;const u=h.length,x=Math.ceil(u/c);return(0,n.jsxs)(a.wL,{children:[(0,n.jsx)(a.zv,{children:(0,n.jsx)("span",{className:"text-muted",children:(()=>{const e=c*(i-1)+1,s=c*i;return(0,n.jsxs)("span",{className:"pagination__desc",children:["Showing ",e," to ",s>u?u:s," of ",u," ",m]})})()})}),(0,n.jsxs)(a.ku,{className:"d-flex",children:[x>1&&(0,n.jsxs)(l.A,{ariaLabel:m,children:[(0,n.jsx)(l.c,{isFirst:!0,isDisabled:!(i-1>0),onClick:()=>s(1)}),(0,n.jsx)(l.c,{isPrev:!0,isDisabled:!(i-1>0),onClick:()=>s(i-1)}),i-1>1&&(0,n.jsx)(l.c,{onClick:()=>s(i-2),children:"..."}),(()=>{let e=[],a=i-1;for(;a>=i-1&&a>0;)e.push((0,n.jsx)(l.c,{onClick:()=>s(i-1),children:a},a)),a-=1;for(e=e.reverse(),e.push((0,n.jsx)(l.c,{isActive:!0,onClick:()=>s(i),children:i},i)),a=i+1;a<=i+1&&a<=x;)e.push((0,n.jsx)(l.c,{onClick:()=>s(i+1),children:a},a)),a+=1;return e})(),i+1<x&&(0,n.jsx)(l.c,{onClick:()=>s(i+2),children:"..."}),(0,n.jsx)(l.c,{isNext:!0,isDisabled:!(i+1<=x),onClick:()=>s(i+1)}),(0,n.jsx)(l.c,{isLast:!0,isDisabled:!(i+1<=x),onClick:()=>s(x)})]}),(0,n.jsx)(r.A,{size:"sm",ariaLabel:"Per",onChange:e=>{o(parseInt(e.target.value,10)),s(1)},value:c.toString(),children:Object.keys(d).map((e=>(0,n.jsx)(t.A,{value:e,children:e},e)))})]})]})}},51399:(e,s,i)=>{i.d(s,{A:()=>t,J:()=>r});i(65043);var a=i(70579);const l=e=>{let{children:s,value:i,disabled:l,ariaLabelledby:r,...t}=e;return(0,a.jsx)("option",{value:i,disabled:l,"aria-labelledby":r||s,...t,children:s})},r=e=>{let{list:s}=e;return null===s||void 0===s?void 0:s.map((e=>(0,a.jsx)(l,{value:e.value,...e,children:e.text||e.label},e.value)))},t=l},45016:(e,s,i)=>{i.d(s,{A:()=>o,c:()=>d});var a=i(65043),l=i(98139),r=i.n(l),t=i(92475),n=i(70579);const d=(0,a.forwardRef)(((e,s)=>{let{className:i,isDisabled:a,isActive:l,isPrev:d,isFirst:c,isNext:o,isLast:h,children:m,onClick:u,...x}=e;return(0,n.jsx)("li",{ref:s,className:r()("page-item",{disabled:a,active:l},i),...x,children:(0,n.jsxs)("span",{role:"button",onClick:u,onKeyDown:u,className:"page-link",tabIndex:a?-1:void 0,"aria-disabled":a?"true":void 0,"aria-label":(d?"First Page":o&&"Last Page")||`${m} page`,children:[d&&(0,n.jsx)(t.A,{icon:"ChevronLeft"}),c&&(0,n.jsx)(t.A,{icon:"FirstPage"}),o&&(0,n.jsx)(t.A,{icon:"ChevronRight"}),h&&(0,n.jsx)(t.A,{icon:"LastPage"}),m]})})}));d.displayName="PaginationItem";const c=(0,a.forwardRef)(((e,s)=>{let{ariaLabel:i,className:a,children:l,size:t,...d}=e;return(0,n.jsx)("nav",{ref:s,"aria-label":i,className:a,...d,children:(0,n.jsx)("ul",{className:r()("pagination",{[`pagination-${t}`]:t},"m-0"),children:l})})}));c.displayName="Pagination";const o=c},12528:(e,s,i)=>{i.d(s,{A:()=>o});var a=i(65043),l=i(98139),r=i.n(l),t=i(51399),n=i(45021),d=i(70579);const c=(0,a.forwardRef)(((e,s)=>{let{id:i,name:a,className:l,children:c,required:o,placeholder:h,ariaDescribedby:m,ariaLabelledby:u,ariaLabel:x,list:j,multiple:v,title:p,size:g,disabled:b,value:N,defaultValue:f,isValid:y,isTouched:A,invalidFeedback:w,validFeedback:C,isValidMessage:k=!0,isTooltipFeedback:I,onBlur:P,onChange:S,onFocus:F,onInput:L,onInvalid:T,onSelect:z,...D}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("select",{ref:s,id:i,className:r()("form-select",{[`form-select-${g}`]:g,"text-muted":""===N&&h,"is-invalid":!y&&A&&w,"is-valid":!y&&A&&!w},l),name:a,"aria-label":x,"aria-describedby":m,"aria-labelledby":u,multiple:v,disabled:b,title:p,value:N,defaultValue:f,required:o,onBlur:P,onChange:S,onFocus:F,onInput:L,onInvalid:T,onSelect:z,...D,children:[h&&(0,d.jsx)(t.A,{value:"",hidden:!0,children:h}),c||j&&(0,d.jsx)(t.J,{list:j})]}),k&&(0,d.jsx)(n.A,{isTouched:A,invalidFeedback:w,validFeedback:C,isTooltip:I})]})}));c.displayName="Select";const o=c},49338:(e,s,i)=>{i.d(s,{A:()=>l});var a=i(65043);const l=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const[i,l]=(0,a.useState)(s);return{items:(0,a.useMemo)((()=>{const s=[...e];return null!==i&&s.sort(((e,s)=>e[i.key]<s[i.key]?"ascending"===i.direction?-1:1:e[i.key]>s[i.key]?"ascending"===i.direction?1:-1:0)),s}),[e,i]),requestSort:e=>{let s="ascending";i&&i.key===e&&"ascending"===i.direction&&(s="descending"),l({key:e,direction:s})},getClassNamesFor:e=>i&&i.key===e?i.direction:"d-none",sortConfig:i}}},98913:(e,s,i)=>{i.r(s),i.d(s,{default:()=>E});var a=i(65043),l=i(70949),r=i(30242),t=i(32922),n=i(26930),d=i(97043),c=i(47819),o=i(64761),h=i(26718),m=i(43856),u=i(92475),x=i(71007),j=i(8323),v=i(70545),p=i(49338),g=i(50974),b=i(81490),N=i(22137),f=i(80899),y=i(52205),A=i(92601),w=i(12528),C=i(51399),k=i(64603),I=i(95178),P=i(70579);const S=e=>{let{id:s,isOpen:i,setIsOpen:r,editItem:t,onSuccess:n}=e;const[d]=(0,k._i)(),[c]=(0,k.eP)(),[o,h]=(0,a.useState)(!1),[j,p]=(0,a.useState)([]),[g,b]=(0,a.useState)([]),[N,S]=(0,a.useState)(""),[F,L]=(0,a.useState)(!1),[T,z]=(0,a.useState)(!1),D=(0,a.useRef)(null);(0,a.useEffect)((()=>{(async()=>{L(!0);try{const e=await(0,I.hU)();p(e),b(e)}catch(e){(0,A.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(u.A,{icon:"Error",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Failed to load users"})]}),"Please try again later.")}finally{L(!1)}})()}),[]),(0,a.useEffect)((()=>{b(N?j.filter((e=>{var s;return null===(s=e.fullName)||void 0===s?void 0:s.toLowerCase().includes(N.toLowerCase())})):j)}),[N,j]),(0,a.useEffect)((()=>{const e=e=>{D.current&&!D.current.contains(e.target)&&z(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const O=(0,l.Wx)({initialValues:{threadName:(null===t||void 0===t?void 0:t.threadName)||"",visibility:(null===t||void 0===t?void 0:t.visibility)||"Public",description:(null===t||void 0===t?void 0:t.description)||"",ownerId:(null===t||void 0===t?void 0:t.ownerId)||""},validationSchema:f.Ik({threadName:f.Yj().required("Thread name is required").min(3,"Thread name must be at least 3 characters"),visibility:f.Yj().required("Visibility is required").oneOf(["Public","Private"],"Invalid visibility option"),description:f.Yj().min(5,"Description must be at least 5 characters"),ownerId:f.Yj().required("Owner is required")}),enableReinitialize:!0,onSubmit:async e=>{h(!0);try{null!==t&&void 0!==t&&t._id?await c({id:t._id,body:e}).unwrap():await d(e).unwrap(),(0,A.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(u.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:t?"Thread Updated":"Thread Added"})]}),`${e.threadName} has been ${t?"updated":"added"} successfully.`),O.resetForm(),r(!1),null===n||void 0===n||n()}catch(s){console.error(s),(0,A.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(u.A,{icon:"Error",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Error"})]}),`Failed to ${t?"update":"add"} thread. Please try again.`)}finally{h(!1)}}});return i?(0,P.jsxs)(y.Ay,{isOpen:i,setIsOpen:r,size:"md",titleId:s,isStaticBackdrop:!0,isCentered:!0,children:[(0,P.jsx)(y.rQ,{setIsOpen:r,className:"p-4",children:(0,P.jsx)(y.wt,{id:s,children:t?"Edit Thread":"Add New Thread"})}),(0,P.jsxs)(y.cw,{className:"px-4",children:[(0,P.jsx)(v.A,{id:"threadName",label:"Thread Name",className:"mb-3",children:(0,P.jsx)(x.A,{id:"threadName",name:"threadName",placeholder:"Enter thread name",onChange:O.handleChange,onBlur:O.handleBlur,value:O.values.threadName,isTouched:!!O.touched.threadName,isValid:!O.errors.threadName,invalidFeedback:O.errors.threadName})}),(0,P.jsx)(v.A,{id:"description",label:"Description",className:"mb-3",children:(0,P.jsx)(x.A,{id:"description",name:"description",placeholder:"Enter description",onChange:O.handleChange,onBlur:O.handleBlur,value:O.values.description,isTouched:!!O.touched.description,isValid:!O.errors.description,invalidFeedback:O.errors.description})}),(0,P.jsx)(v.A,{id:"visibility",label:"Visibility",className:"mb-3",children:(0,P.jsxs)(w.A,{id:"visibility",name:"visibility",onChange:O.handleChange,onBlur:O.handleBlur,value:O.values.visibility,isTouched:!!O.touched.visibility,isValid:!O.errors.visibility,invalidFeedback:O.errors.visibility,ariaLabel:"",children:[(0,P.jsx)(C.A,{value:"Public",children:"Public"}),(0,P.jsx)(C.A,{value:"Private",children:"Private"})]})}),(0,P.jsx)(v.A,{id:"ownerId",label:"Owner (search by name)",className:"mb-3",children:(0,P.jsxs)("div",{ref:D,children:[(0,P.jsx)(x.A,{type:"text",placeholder:"Search user...",onFocus:()=>z(!0),onChange:e=>{S(e.target.value),z(!0),O.setFieldTouched("ownerId",!0)},value:N,className:"mb-2"}),T?(0,P.jsx)("div",{className:"border rounded p-2",style:{maxHeight:"200px",overflowY:"auto"},children:F?(0,P.jsx)("div",{children:"Loading users..."}):0===g.length?(0,P.jsx)("div",{className:"text-muted",children:"No user found"}):g.map((e=>(0,P.jsx)("div",{className:"p-2 rounded mb-1 "+(O.values.ownerId===e._id?"bg-primary text-white":"hover:bg-light"),style:{cursor:"pointer"},onClick:()=>{O.setFieldValue("ownerId",e._id),S(e.fullName),z(!1)},children:e.fullName},e._id)))}):null,O.touched.ownerId&&O.errors.ownerId&&(0,P.jsx)("div",{className:"text-danger mt-1",children:O.errors.ownerId})]})})]}),(0,P.jsxs)(y.jl,{className:"px-4 pb-4",children:[(0,P.jsx)(m.A,{color:"secondary",onClick:()=>r(!1),className:"me-2",isDisable:o,children:"Cancel"}),(0,P.jsxs)(m.A,{color:"primary",onClick:O.handleSubmit,isDisable:o,children:[t?"Update Thread":"Add Thread"," ",o&&"..."]})]})]}):null};var F=i(79532),L=i(834);const T=()=>(0,P.jsx)(r.A,{title:d.P9.pageError.text,children:(0,P.jsx)(n.A,{children:(0,P.jsxs)("div",{className:"row d-flex align-items-center h-100",children:[(0,P.jsxs)("div",{className:"col-12 d-flex flex-column justify-content-center align-items-center",children:[(0,P.jsx)("div",{className:"text-primary fw-bold",style:{fontSize:"calc(3rem + 3vw)"},children:"Error"}),(0,P.jsx)("div",{className:"text-dark fw-bold",style:{fontSize:"calc(1.5rem + 1.5vw)"},children:"Something went wrong"})]}),(0,P.jsx)("div",{className:"col-12 d-flex align-items-baseline justify-content-center",children:(0,P.jsx)("img",{srcSet:L,src:F,alt:"Humans",style:{height:"50vh"}})}),(0,P.jsx)("div",{className:"col-12 d-flex flex-column justify-content-center align-items-center",children:(0,P.jsx)(m.A,{className:"px-5 py-3",color:"primary",isLight:!0,icon:"HolidayVillage",tag:"a",href:"/",children:"Homepage"})})]})})});var z=i(71173);const D=()=>(0,P.jsx)(r.A,{title:"Loading...",children:(0,P.jsx)(n.A,{className:"d-flex justify-content-center align-items-center w-100 h-100",children:(0,P.jsx)("div",{className:"row d-flex align-items-center h-100",children:(0,P.jsxs)("div",{className:"col-12 d-flex flex-column justify-content-center align-items-center mt-5",children:[(0,P.jsx)("div",{className:"text-primary fw-bold",children:(0,P.jsx)(z.A,{size:30})}),(0,P.jsx)("div",{className:"text-dark fw-bold",style:{fontSize:"calc(1rem + 1.5vw)"},children:"Please wait a moment"})]})})})});var O=i(73980);const q=e=>{if(void 0===e||null===e)return"primary";try{const s="string"===typeof e?parseInt(e,10)||0:e;return(0,b.$)(Math.abs(s)%20)}catch{return"primary"}},E=()=>{var e,s;const{darkModeStatus:i}=(0,N.A)(),[b,f]=(0,a.useState)(1),[y,w]=(0,a.useState)(h.CQ[10]),[C]=(0,k.K4)(),[I,F]=(0,a.useState)(!1),[L,z]=(0,a.useState)(void 0),[E,R]=(0,a.useState)({isOpen:!1,src:"",name:""}),{data:$,isLoading:_,isError:V,refetch:Q}=(0,k.Hk)({page_number:b,page_size:y}),M=Array.isArray(null===$||void 0===$||null===(e=$.data)||void 0===e?void 0:e.data)?null===(s=$.data)||void 0===s?void 0:s.data:[];console.log("threadsData",M);const B=(0,l.Wx)({initialValues:{searchInput:"",threadIdFilter:""},onSubmit:()=>{}}),H=null===M||void 0===M?void 0:M.filter((e=>{var s;return!!e&&((null===(s=e.threadName)||void 0===s?void 0:s.toLowerCase().includes(B.values.searchInput.toLowerCase()))||"")}));console.log("filteredDatafilteredData",H);const{items:U,requestSort:J,getClassNamesFor:Y}=(0,p.A)(H);console.log("itemsitems",U);const W=()=>{Q()};return(0,P.jsxs)(r.A,{title:d.P9.crm.subMenu.customersList.text,className:"mt-3",children:[(0,P.jsxs)(t.Ay,{children:[(0,P.jsxs)(t.n5,{children:[(0,P.jsx)("label",{className:"border-0 bg-transparent cursor-pointer me-0",htmlFor:"searchInput",children:(0,P.jsx)(u.A,{icon:"Search",size:"2x",color:"primary"})}),(0,P.jsx)(x.A,{id:"searchInput",type:"search",className:"border-0 shadow-none bg-transparent",placeholder:"Search threads...",onChange:B.handleChange,value:B.values.searchInput})]}),(0,P.jsxs)(t.qb,{children:[(0,P.jsxs)(j.Ay,{children:[(0,P.jsx)(j.C,{hasIcon:!1,children:(0,P.jsx)(m.A,{icon:"FilterAlt",color:"dark",isLight:!0,className:"btn-only-icon position-relative","aria-label":"Filter",children:M.length!==H.length&&(0,P.jsx)(g.A,{desc:"Filtering applied",trigger:"hover",children:(0,P.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge border border-light rounded-circle bg-danger p-2",children:(0,P.jsx)("span",{className:"visually-hidden",children:"there is filtering"})})})})}),(0,P.jsx)(j.rI,{isAlignmentEnd:!0,size:"lg",children:(0,P.jsx)("div",{className:"container py-2",children:(0,P.jsx)("div",{className:"row g-3",children:(0,P.jsx)(v.A,{label:"Thread ID",className:"col-12",children:(0,P.jsx)(x.A,{id:"threadIdFilter",ariaLabel:"Thread ID",placeholder:"Filter by Thread ID",onChange:B.handleChange,value:B.values.threadIdFilter})})})})})]}),(0,P.jsx)(t.ro,{}),(0,P.jsx)(m.A,{icon:"PersonAdd",color:"primary",isLight:!0,onClick:()=>{F(!0),z(void 0)},children:"New Thread"})]})]}),(0,P.jsx)(n.A,{children:(0,P.jsx)("div",{className:"row h-100",children:(0,P.jsx)("div",{className:"col-12",children:V?(0,P.jsx)(T,{}):_?(0,P.jsx)(D,{}):(0,P.jsxs)(c.Ay,{stretch:!0,children:[(0,P.jsx)(c.bw,{isScrollable:!0,className:"table-responsive",children:(0,P.jsxs)("table",{className:"table table-modern table-hover",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsxs)("th",{className:"text-center cursor-pointer",onClick:()=>J("_id"),children:["Thread"," ",(0,P.jsx)(u.A,{size:"lg",className:Y("_id"),icon:"FilterList"})]}),(0,P.jsx)("th",{className:"text-center",children:"Thread Name"}),(0,P.jsx)("th",{className:"text-center",children:"Visibility"}),(0,P.jsx)("th",{className:"text-center",children:"Total Members"}),(0,P.jsx)("th",{className:"text-center",children:"QR Code"}),(0,P.jsx)("th",{className:"text-center",children:"Actions"})]})}),(0,P.jsx)("tbody",{children:(0,h.li)(U,b,y).map((e=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"text-center",children:(0,P.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:(0,P.jsx)("div",{className:"flex-shrink-0",children:(0,P.jsx)("div",{className:"ratio ratio-1x1 me-3",style:{width:48},children:(0,P.jsx)("div",{className:`bg-l${i?"o25":"25"}-${q(null===e||void 0===e?void 0:e._id)} text-${q(null===e||void 0===e?void 0:e._id)} rounded-2 d-flex align-items-center justify-content-center`,children:(0,P.jsx)("span",{className:"fw-bold",children:(0,o.Vz)((null===e||void 0===e?void 0:e.threadName)||"")})})})})})}),(0,P.jsx)("td",{className:"text-center",children:(0,P.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.threadName)||"N/A"})}),(0,P.jsx)("td",{className:"text-center",children:(0,P.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.visibility)||"N/A"})}),(0,P.jsx)("td",{className:"text-center",children:(0,P.jsx)("div",{className:"fs-6 fw-bold",children:null!==e&&void 0!==e&&e.members?e.members.length:"N/A"})}),(0,P.jsx)("td",{className:"text-center",children:null!==e&&void 0!==e&&e.qrCode?(0,P.jsx)("div",{className:"d-flex justify-content-center",children:(0,P.jsx)("div",{style:{width:"50px",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:(0,P.jsx)("img",{src:`https://kandi-backend.cradle.services/${e.qrCode}`,alt:"QR Code",style:{width:"100%",height:"100%",objectFit:"contain"}})})}):(0,P.jsx)("div",{className:"fs-6 text-muted",children:"No QR"})}),(0,P.jsx)("td",{className:"text-center",children:(0,P.jsxs)(j.Ay,{children:[(0,P.jsx)(j.C,{hasIcon:!1,children:(0,P.jsx)(m.A,{icon:"MoreHoriz",color:"dark",isLight:!0,shadow:"sm","aria-label":"More actions"})}),(0,P.jsxs)(j.rI,{isAlignmentEnd:!0,children:[(0,P.jsx)(j.tJ,{children:(0,P.jsx)(m.A,{icon:"Print",onClick:()=>R({isOpen:!0,src:`https://kandi-backend.cradle.services/${e.qrCode}`,name:null===e||void 0===e?void 0:e.threadName}),children:"Print QR"})}),(0,P.jsx)(j.tJ,{children:(0,P.jsx)(m.A,{icon:"Edit",onClick:()=>{z(e),F(!0)},children:"Edit"})}),(0,P.jsx)(j.tJ,{children:(0,P.jsx)(m.A,{icon:"Delete",onClick:()=>(async e=>{if(e&&window.confirm("Are you sure you want to delete this thread?"))try{await C(e).unwrap(),W(),(0,A.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(u.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Thread Deleted"})]}),"Thread has been deleted successfully.")}catch(s){console.error("Failed to delete thread:",s),(0,A.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(u.A,{icon:"Error",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Error"})]}),"Failed to delete thread. Please try again.")}})(null===e||void 0===e?void 0:e._id),children:"Delete"})})]})]})})]},(null===e||void 0===e?void 0:e._id)||Math.random())))})]})}),(0,P.jsx)(h.Ay,{data:H,label:"threads",setCurrentPage:f,currentPage:b,perPage:y,setPerPage:w})]})})})}),(0,P.jsx)(O.A,{isOpen:E.isOpen,setIsOpen:()=>R({...E,isOpen:!1,src:"",name:""}),beadName:E.name,qrUrl:E.src}),(0,P.jsx)(S,{id:"thread-modal",isOpen:I,setIsOpen:()=>{F(!1),z(void 0)},editItem:L,onSuccess:W})]})}},73980:(e,s,i)=>{i.d(s,{A:()=>u});var a=i(65043),l=i(93141),r=i(90074),t=i.n(r),n=i(52205),d=i(70545),c=i(71007),o=i(12528),h=i(43856),m=i(70579);const u=e=>{let{isOpen:s,setIsOpen:i,beadName:r,qrUrl:u,qrImageUrl:x}=e;const[j,v]=(0,a.useState)(1),[p,g]=(0,a.useState)("A4"),[b,N]=(e=>{switch(e){case"A1":return[594,841];case"A2":return[420,594];case"A3":return[297,420];case"A4":default:return[210,297];case"Letter":return[215.9,279.4]}})(p),f=(0,a.useRef)(null),y=(0,l.useReactToPrint)({contentRef:f,documentTitle:"",pageStyle:`\n    @page {\n      size: ${p};\n      margin: 0;\n    }\n    html, body {\n      margin: 0 !important;\n      padding: 0 !important;\n      height: 100%;\n      width: 100%;\n      -webkit-print-color-adjust: exact !important;\n      print-color-adjust: exact !important;\n      background: white;\n    }\n    div {\n      break-after: page;\n    }\n  `});return s?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(n.Ay,{isOpen:s,setIsOpen:i,size:"md",titleId:"qr-template-modal",children:[(0,m.jsx)(n.rQ,{setIsOpen:i,children:(0,m.jsx)(n.wt,{id:"qr-template-modal",children:"Print QR Codes"})}),(0,m.jsxs)(n.cw,{children:[(0,m.jsxs)("div",{className:"row g-3",children:[(0,m.jsx)(d.A,{label:"Sheet Size",className:"col-md-6",children:(0,m.jsxs)(o.A,{value:p,onChange:e=>g(e.target.value),ariaLabel:"Sheet Size",children:[(0,m.jsx)("option",{value:"A1",children:"A1"}),(0,m.jsx)("option",{value:"A2",children:"A2"}),(0,m.jsx)("option",{value:"A3",children:"A3"}),(0,m.jsx)("option",{value:"A4",children:"A4"}),(0,m.jsx)("option",{value:"Letter",children:"Letter"})]})}),(0,m.jsx)(d.A,{label:"Quantity",className:"col-md-6",children:(0,m.jsx)(c.A,{type:"number",min:1,value:j,onChange:e=>v(Number(e.target.value))})})]}),(0,m.jsx)("div",{className:"d-flex justify-content-center mt-4",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("img",{src:x||u,alt:`QR Code for ${r}`,style:{width:200,height:200}}),(0,m.jsx)("div",{className:"mt-2 h4",children:r})]})})]}),(0,m.jsxs)(n.jl,{children:[(0,m.jsx)(h.A,{icon:"Print",color:"info",isLight:!0,onClick:y,children:"Print"}),(0,m.jsx)(h.A,{icon:"PictureAsPdf",color:"danger",isLight:!0,onClick:()=>{if(!f.current)return;const e={margin:0,filename:`${r}_QR_Codes.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:[b,N],orientation:"portrait"}};t()().set(e).from(f.current).save()},children:"PDF"})]})]}),(0,m.jsx)("div",{style:{display:"none"},children:(0,m.jsx)("div",{ref:f,children:[...Array(j)].map(((e,s)=>(0,m.jsxs)("div",{className:"qr-pdf-page",style:{height:`${N}mm`,width:`${b}mm`,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,m.jsx)("img",{src:x||u,alt:`QR Code Page ${s+1}`,style:{width:"80%",height:"80%",objectFit:"contain",marginTop:-200}}),(0,m.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold"},children:r})]},s)))})})]}):null}},834:(e,s,i)=>{e.exports=i.p+"static/media/scene4.43533558bb711c51a491.webp"},79532:(e,s,i)=>{e.exports=i.p+"static/media/scene4.0c3c1d8796140eb6c0be.png"}}]);
//# sourceMappingURL=8913.a3ac2974.chunk.js.map