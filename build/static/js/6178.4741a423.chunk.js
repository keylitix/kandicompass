"use strict";(self.webpackChunkfacit=self.webpackChunkfacit||[]).push([[6178],{7759:(e,a,i)=>{i.d(a,{A:()=>l});const l={PAYPAL:{name:"PayPal"},PAYONEER:{name:"Payoneer"},SWIFT:{name:"Swift"}}},26718:(e,a,i)=>{i.d(a,{Ay:()=>o,CQ:()=>t,li:()=>c});i(65043);var l=i(47819),s=i(45016),n=i(12528),d=i(51399),r=i(70579);const t={3:3,5:5,10:10,25:25,50:50},c=(e,a,i)=>e.filter(((e,l)=>l+1>(a-1)*i&&l+1<=a*i)),o=e=>{let{setCurrentPage:a,currentPage:i,perPage:c,setPerPage:o,data:h,label:m="items"}=e;const u=h.length,p=Math.ceil(u/c);return(0,r.jsxs)(l.wL,{children:[(0,r.jsx)(l.zv,{children:(0,r.jsx)("span",{className:"text-muted",children:(()=>{const e=c*(i-1)+1,a=c*i;return(0,r.jsxs)("span",{className:"pagination__desc",children:["Showing ",e," to ",a>u?u:a," of ",u," ",m]})})()})}),(0,r.jsxs)(l.ku,{className:"d-flex",children:[p>1&&(0,r.jsxs)(s.A,{ariaLabel:m,children:[(0,r.jsx)(s.c,{isFirst:!0,isDisabled:!(i-1>0),onClick:()=>a(1)}),(0,r.jsx)(s.c,{isPrev:!0,isDisabled:!(i-1>0),onClick:()=>a(i-1)}),i-1>1&&(0,r.jsx)(s.c,{onClick:()=>a(i-2),children:"..."}),(()=>{let e=[],l=i-1;for(;l>=i-1&&l>0;)e.push((0,r.jsx)(s.c,{onClick:()=>a(i-1),children:l},l)),l-=1;for(e=e.reverse(),e.push((0,r.jsx)(s.c,{isActive:!0,onClick:()=>a(i),children:i},i)),l=i+1;l<=i+1&&l<=p;)e.push((0,r.jsx)(s.c,{onClick:()=>a(i+1),children:l},l)),l+=1;return e})(),i+1<p&&(0,r.jsx)(s.c,{onClick:()=>a(i+2),children:"..."}),(0,r.jsx)(s.c,{isNext:!0,isDisabled:!(i+1<=p),onClick:()=>a(i+1)}),(0,r.jsx)(s.c,{isLast:!0,isDisabled:!(i+1<=p),onClick:()=>a(p)})]}),(0,r.jsx)(n.A,{size:"sm",ariaLabel:"Per",onChange:e=>{o(parseInt(e.target.value,10)),a(1)},value:c.toString(),children:Object.keys(t).map((e=>(0,r.jsx)(d.A,{value:e,children:e},e)))})]})]})}},51399:(e,a,i)=>{i.d(a,{A:()=>d,J:()=>n});i(65043);var l=i(70579);const s=e=>{let{children:a,value:i,disabled:s,ariaLabelledby:n,...d}=e;return(0,l.jsx)("option",{value:i,disabled:s,"aria-labelledby":n||a,...d,children:a})},n=e=>{let{list:a}=e;return null===a||void 0===a?void 0:a.map((e=>(0,l.jsx)(s,{value:e.value,...e,children:e.text||e.label},e.value)))},d=s},45016:(e,a,i)=>{i.d(a,{A:()=>o,c:()=>t});var l=i(65043),s=i(98139),n=i.n(s),d=i(92475),r=i(70579);const t=(0,l.forwardRef)(((e,a)=>{let{className:i,isDisabled:l,isActive:s,isPrev:t,isFirst:c,isNext:o,isLast:h,children:m,onClick:u,...p}=e;return(0,r.jsx)("li",{ref:a,className:n()("page-item",{disabled:l,active:s},i),...p,children:(0,r.jsxs)("span",{role:"button",onClick:u,onKeyDown:u,className:"page-link",tabIndex:l?-1:void 0,"aria-disabled":l?"true":void 0,"aria-label":(t?"First Page":o&&"Last Page")||`${m} page`,children:[t&&(0,r.jsx)(d.A,{icon:"ChevronLeft"}),c&&(0,r.jsx)(d.A,{icon:"FirstPage"}),o&&(0,r.jsx)(d.A,{icon:"ChevronRight"}),h&&(0,r.jsx)(d.A,{icon:"LastPage"}),m]})})}));t.displayName="PaginationItem";const c=(0,l.forwardRef)(((e,a)=>{let{ariaLabel:i,className:l,children:s,size:d,...t}=e;return(0,r.jsx)("nav",{ref:a,"aria-label":i,className:l,...t,children:(0,r.jsx)("ul",{className:n()("pagination",{[`pagination-${d}`]:d},"m-0"),children:s})})}));c.displayName="Pagination";const o=c},12528:(e,a,i)=>{i.d(a,{A:()=>o});var l=i(65043),s=i(98139),n=i.n(s),d=i(51399),r=i(45021),t=i(70579);const c=(0,l.forwardRef)(((e,a)=>{let{id:i,name:l,className:s,children:c,required:o,placeholder:h,ariaDescribedby:m,ariaLabelledby:u,ariaLabel:p,list:x,multiple:v,title:g,size:j,disabled:b,value:N,defaultValue:A,isValid:f,isTouched:y,invalidFeedback:C,validFeedback:w,isValidMessage:P=!0,isTooltipFeedback:k,onBlur:S,onChange:I,onFocus:z,onInput:L,onInvalid:U,onSelect:O,...F}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("select",{ref:a,id:i,className:n()("form-select",{[`form-select-${j}`]:j,"text-muted":""===N&&h,"is-invalid":!f&&y&&C,"is-valid":!f&&y&&!C},s),name:l,"aria-label":p,"aria-describedby":m,"aria-labelledby":u,multiple:v,disabled:b,title:g,value:N,defaultValue:A,required:o,onBlur:S,onChange:I,onFocus:z,onInput:L,onInvalid:U,onSelect:O,...F,children:[h&&(0,t.jsx)(d.A,{value:"",hidden:!0,children:h}),c||x&&(0,t.jsx)(d.J,{list:x})]}),P&&(0,t.jsx)(r.A,{isTouched:y,invalidFeedback:C,validFeedback:w,isTooltip:k})]})}));c.displayName="Select";const o=c},49338:(e,a,i)=>{i.d(a,{A:()=>s});var l=i(65043);const s=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const[i,s]=(0,l.useState)(a);return{items:(0,l.useMemo)((()=>{const a=[...e];return null!==i&&a.sort(((e,a)=>e[i.key]<a[i.key]?"ascending"===i.direction?-1:1:e[i.key]>a[i.key]?"ascending"===i.direction?1:-1:0)),a}),[e,i]),requestSort:e=>{let a="ascending";i&&i.key===e&&"ascending"===i.direction&&(a="descending"),s({key:e,direction:a})},getClassNamesFor:e=>i&&i.key===e?i.direction:"d-none",sortConfig:i}}},96178:(e,a,i)=>{i.r(a),i.d(a,{default:()=>F});var l=i(65043),s=i(70949),n=i(30242),d=i(32922),r=i(26930),t=i(97043),c=i(47819),o=i(64761),h=i(26718),m=i(43856),u=i(92475),p=i(71007),x=i(8323),v=i(70545),g=i(7759),j=i(49338),b=i(87317),N=i(50974),A=i(81490),f=i(22137),y=i(52205),C=i(92601),w=i(14106),P=i(79628),k=i(70579);const S=e=>{let{id:a,isOpen:i,setIsOpen:n,editItem:d,onSuccess:r}=e;const[t,{isLoading:c}]=(0,P.sg)(),[o,h]=(0,l.useState)(!1),[x,g]=(0,l.useState)(""),j=(0,s.Wx)({initialValues:{beadName:(null===d||void 0===d?void 0:d.beadName)||"",beadType:(null===d||void 0===d?void 0:d.beadType)||"",material:(null===d||void 0===d?void 0:d.material)||"",color:(null===d||void 0===d?void 0:d.color)||"",size:(null===d||void 0===d?void 0:d.size)||0,shape:(null===d||void 0===d?void 0:d.shape)||"",weight:(null===d||void 0===d?void 0:d.weight)||0,finish:(null===d||void 0===d?void 0:d.finish)||"",quantity:(null===d||void 0===d?void 0:d.quantity)||0,pricePerUnit:(null===d||void 0===d?void 0:d.pricePerUnit)||0,supplier:(null===d||void 0===d?void 0:d.supplier)||"",productCode:(null===d||void 0===d?void 0:d.productCode)||"",description:(null===d||void 0===d?void 0:d.description)||"",image:(null===d||void 0===d?void 0:d.imageUrl)||""},enableReinitialize:!0,onSubmit:async e=>{try{const a={...e,size:Number(e.size),weight:Number(e.weight),quantity:Number(e.quantity),pricePerUnit:Number(e.pricePerUnit),image:x||e.image};await t({id:d._id,body:a}).unwrap();(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:"Bead Updated"})]}),`${e.beadName} has been updated successfully.`),g(""),n(!1),r&&r()}catch(a){console.error("Error updating bead:",a),(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"Error",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:"Error"})]}),"Failed to update bead. Please try again.")}}});(0,l.useEffect)((()=>{d&&(j.resetForm({values:{beadName:(null===d||void 0===d?void 0:d.beadName)||"",beadType:(null===d||void 0===d?void 0:d.beadType)||"",material:(null===d||void 0===d?void 0:d.material)||"",color:(null===d||void 0===d?void 0:d.color)||"",size:(null===d||void 0===d?void 0:d.size)||0,shape:(null===d||void 0===d?void 0:d.shape)||"",weight:(null===d||void 0===d?void 0:d.weight)||0,finish:(null===d||void 0===d?void 0:d.finish)||"",quantity:(null===d||void 0===d?void 0:d.quantity)||0,pricePerUnit:(null===d||void 0===d?void 0:d.pricePerUnit)||0,supplier:(null===d||void 0===d?void 0:d.supplier)||"",productCode:(null===d||void 0===d?void 0:d.productCode)||"",description:(null===d||void 0===d?void 0:d.description)||"",image:(null===d||void 0===d?void 0:d.imageUrl)||""}}),g(""))}),[d]);const b=x||j.values.image;return i?(0,k.jsxs)(y.Ay,{isOpen:i,setIsOpen:n,size:"xl",titleId:a,isStaticBackdrop:!0,children:[(0,k.jsx)(y.rQ,{setIsOpen:n,className:"p-4",children:(0,k.jsx)(y.wt,{id:a,children:"Edit Bead"})}),(0,k.jsx)(y.cw,{className:"px-4",children:(0,k.jsxs)("div",{className:"row g-4",children:[(0,k.jsx)(v.A,{id:"beadName",label:"Bead Name",className:"col-md-12",children:(0,k.jsx)(p.A,{name:"beadName",onChange:j.handleChange,value:j.values.beadName,required:!0})}),(0,k.jsx)(v.A,{label:"Bead Image",className:"col-12",children:(0,k.jsxs)("div",{className:"upload-container d-flex justify-content-center align-items-center p-4",style:{border:"2px dashed #ccc",borderRadius:"8px",minHeight:"200px",backgroundColor:b?"transparent":"#f8f9fa",position:"relative"},children:[o?(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)(u.A,{icon:"Loop",size:"3x",className:"spinning"}),(0,k.jsx)("p",{children:"Processing image..."})]}):b?(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("img",{src:b,alt:"Bead preview",style:{maxHeight:"150px",maxWidth:"100%",marginBottom:"1rem",borderRadius:"4px"}}),(0,k.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[(0,k.jsx)(m.A,{color:"info",onClick:()=>{var e;return null===(e=document.getElementById("file-upload"))||void 0===e?void 0:e.click()},icon:"Image",isDisable:c,children:"Change Image"}),(0,k.jsx)(m.A,{color:"danger",onClick:()=>{g(""),j.setFieldValue("image","")},icon:"Delete",isDisable:c,children:"Remove"})]})]}):(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("div",{className:"cloud-icon mb-3",children:(0,k.jsx)(u.A,{icon:"CloudUpload",size:"3x"})}),(0,k.jsxs)("p",{children:[(0,k.jsx)("span",{style:{color:"#0d6efd"},children:"CLICK TO BROWSE"})," OR DRAG IT HERE"]}),(0,k.jsx)("p",{className:"text-muted",children:"JPG, PNG (Max 5MB)"}),(0,k.jsx)(m.A,{color:"info",onClick:()=>{var e;return null===(e=document.getElementById("file-upload"))||void 0===e?void 0:e.click()},icon:"Upload",isDisable:c,children:"Select Image"})]}),(0,k.jsx)("input",{type:"file",id:"file-upload",className:"d-none",onChange:async e=>{if(e.target.files&&e.target.files[0]){h(!0);const i=e.target.files[0];if(i.size>5242880)return(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"Error",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:"File Too Large"})]}),"Maximum file size is 5MB. Please choose a smaller image."),void h(!1);try{const e=await(e=>new Promise(((a,i)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=()=>a(l.result),l.onerror=e=>i(e)})))(i);g(e),(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:"Image Ready"})]}),"Image will be saved with the bead.")}catch(a){console.error("Error converting image:",a),(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"Error",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:"Upload Failed"})]}),"Failed to process image. Please try again.")}finally{h(!1)}}},accept:"image/*",disabled:o||c})]})}),(0,k.jsx)(v.A,{id:"beadType",label:"Bead Type",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"beadType",onChange:j.handleChange,value:j.values.beadType,required:!0})}),(0,k.jsx)(v.A,{id:"material",label:"Material",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"material",onChange:j.handleChange,value:j.values.material,required:!0})}),(0,k.jsx)(v.A,{id:"color",label:"Color",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"color",onChange:j.handleChange,value:j.values.color,required:!0})}),(0,k.jsx)(v.A,{id:"size",label:"Size (mm)",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"size",type:"number",onChange:j.handleChange,value:j.values.size,required:!0})}),(0,k.jsx)(v.A,{id:"shape",label:"Shape",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"shape",onChange:j.handleChange,value:j.values.shape,required:!0})}),(0,k.jsx)(v.A,{id:"weight",label:"Weight (g)",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"weight",type:"number",onChange:j.handleChange,value:j.values.weight,required:!0})}),(0,k.jsx)(v.A,{id:"finish",label:"Finish",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"finish",onChange:j.handleChange,value:j.values.finish})}),(0,k.jsx)(v.A,{id:"quantity",label:"Quantity",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"quantity",type:"number",onChange:j.handleChange,value:j.values.quantity,required:!0})}),(0,k.jsx)(v.A,{id:"pricePerUnit",label:"Price Per Unit ($)",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"pricePerUnit",type:"number",onChange:j.handleChange,value:j.values.pricePerUnit,required:!0})}),(0,k.jsx)(v.A,{id:"supplier",label:"Supplier",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"supplier",onChange:j.handleChange,value:j.values.supplier})}),(0,k.jsx)(v.A,{id:"productCode",label:"Product Code",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"productCode",onChange:j.handleChange,value:j.values.productCode})}),(0,k.jsx)(v.A,{id:"description",label:"Description",className:"col-md-12",children:(0,k.jsx)(w.A,{name:"description",rows:3,onChange:j.handleChange,value:j.values.description})})]})}),(0,k.jsxs)(y.jl,{className:"px-4 pb-4",children:[(0,k.jsx)(m.A,{color:"secondary",onClick:()=>n(!1),className:"me-2",isDisable:c,children:"Cancel"}),(0,k.jsx)(m.A,{color:"primary",onClick:()=>j.handleSubmit(),isDisable:c||o,children:c?"Updating...":"Update Bead"})]})]}):null};var I=i(12528),z=i(64603);const L=e=>{var a,i;let{id:n,isOpen:d,setIsOpen:r,editItem:t,onSuccess:c}=e;const[o]=(0,P.oB)(),[h]=(0,P.sg)(),[x]=(0,P.ae)(),[g]=(0,P.iS)(),[j,b]=(0,l.useState)(!1),[N,A]=(0,l.useState)(!1),[f,S]=(0,l.useState)([]),[L,U]=(0,l.useState)([]),[O,F]=(0,l.useState)(!1),{data:q,isLoading:D}=(0,z.Hk)({page_number:1,page_size:100}),T=(null===q||void 0===q||null===(a=q.data)||void 0===a?void 0:a.data)||[];(0,l.useEffect)((()=>{d||(L.forEach(URL.revokeObjectURL),U([]),S([]))}),[d]);const R=(0,s.Wx)({initialValues:{beadName:(null===t||void 0===t?void 0:t.beadName)||"",beadType:(null===t||void 0===t?void 0:t.beadType)||"",threadId:(null===t||void 0===t?void 0:t._id)||"",material:(null===t||void 0===t?void 0:t.material)||"",color:(null===t||void 0===t?void 0:t.color)||"",size:(null===t||void 0===t?void 0:t.size)||0,shape:(null===t||void 0===t?void 0:t.shape)||"",weight:(null===t||void 0===t?void 0:t.weight)||0,finish:(null===t||void 0===t?void 0:t.finish)||"",quantity:(null===t||void 0===t?void 0:t.quantity)||0,pricePerUnit:(null===t||void 0===t?void 0:t.pricePerUnit)||0,supplier:(null===t||void 0===t?void 0:t.supplier)||"",productCode:(null===t||void 0===t?void 0:t.productCode)||"",description:(null===t||void 0===t?void 0:t.description)||"",imageUrl:(null===t||void 0===t?void 0:t.imageUrl)||"",unitOfMeasure:(null===t||void 0===t?void 0:t.unitOfMeasure)||"pieces",inventoryLocation:(null===t||void 0===t?void 0:t.inventoryLocation)||"",minimumStockLevel:(null===t||void 0===t?void 0:t.minimumStockLevel)||0,maximumStockLevel:(null===t||void 0===t?void 0:t.maximumStockLevel)||0,reorderPoint:(null===t||void 0===t?void 0:t.reorderPoint)||0,leadTimeDays:(null===t||void 0===t?void 0:t.leadTimeDays)||0,isActive:null===(i=null===t||void 0===t?void 0:t.isActive)||void 0===i||i,tags:(null===t||void 0===t?void 0:t.tags)||[],notes:(null===t||void 0===t?void 0:t.notes)||"",data:void 0,updatedAt:void 0,createdAt:void 0},enableReinitialize:!0,onSubmit:async e=>{A(!0);try{let a=null===t||void 0===t?void 0:t._id,i=[];if(a){if(f.length>0){b(!0);const e=new FormData;f.forEach((a=>e.append("files",a)));const l=await x({beadId:a,formData:e}).unwrap();if(null===l||void 0===l||!l.images||0===l.images.length)throw new Error("Image upload failed.");i=l.images}await h({id:a,body:{...e,imageUrl:i[0]||e.imageUrl}}).unwrap()}else{if(a=(await o(e).unwrap()).data._doc._id,!a)throw new Error("Bead creation failed.");if(f.length>0){b(!0);const e=new FormData;f.forEach((a=>e.append("files",a)));const l=await x({beadId:a,formData:e}).unwrap();if(null===l||void 0===l||!l.images||0===l.images.length)throw await g(a).unwrap(),new Error("Image upload failed. Bead has been deleted.");i=l.images}}(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:t?"Bead Updated":"Bead Added"})]}),`${e.beadName} has been ${t?"updated":"added"} successfully.`),R.resetForm(),r(!1),null===c||void 0===c||c()}catch(a){(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"Error",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:"Error"})]}),`Failed to ${t?"update":"add"} bead. ${(null===a||void 0===a?void 0:a.message)||"Please try again."}`)}finally{A(!1),b(!1)}}}),B=e=>{let a=[];"dataTransfer"in e?(e.preventDefault(),a=Array.from(e.dataTransfer.files)):e.target.files&&(a=Array.from(e.target.files));const i=[],l=[];for(const s of a)s.size>5242880||!s.type.startsWith("image/")?(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"Error",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:"Invalid File"})]}),`${s.name} is too large or not an image.`):(i.push(s),l.push(URL.createObjectURL(s)));S((e=>[...e,...i])),U((e=>[...e,...l]))};if(!d)return null;return(0,k.jsx)("div",{onDragOver:e=>{e.preventDefault()},onDragEnter:()=>{F(!0)},onDragLeave:()=>{F(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),F(!1),B(e)},style:{width:"100vw",height:"100vh"},children:(0,k.jsxs)(y.Ay,{isOpen:d,setIsOpen:r,size:"lg",titleId:n,isStaticBackdrop:!0,children:[(0,k.jsx)(y.rQ,{setIsOpen:r,className:"p-4",children:(0,k.jsx)(y.wt,{id:n,children:t?"Edit Bead":"Add New Bead"})}),(0,k.jsx)(y.cw,{className:"px-4",children:(0,k.jsxs)("div",{className:"row g-4",children:[(0,k.jsxs)("div",{className:"col-md-12",children:[(0,k.jsx)("h5",{className:"mb-3",children:"Basic Information"}),(0,k.jsxs)("div",{className:"row g-3",children:[(0,k.jsx)(v.A,{id:"beadName",label:"Bead Name",className:"col-md-6",children:(0,k.jsx)(p.A,{name:"beadName",onChange:R.handleChange,value:R.values.beadName,required:!0})}),(0,k.jsx)(v.A,{id:"beadType",label:"Bead Type",className:"col-md-6",children:(0,k.jsx)(p.A,{name:"beadType",onChange:R.handleChange,value:R.values.beadType,required:!0})}),(0,k.jsx)(v.A,{id:"threadId",label:"ThreadID",className:"col-md-6",children:(0,k.jsxs)(I.A,{name:"threadId",onChange:R.handleChange,value:R.values.threadId,ariaLabel:"Select ThreadId",children:[(0,k.jsx)("option",{value:"",children:"Select a thread"}),T.map((e=>(0,k.jsx)("option",{value:e._id,children:e.threadName},e._id))),!D&&Array.isArray(T)&&T.map((e=>(0,k.jsx)("option",{value:e._id,children:e.threadName},e._id)))]})})]})]}),(0,k.jsxs)("div",{className:"col-md-12",children:[(0,k.jsx)("h5",{className:"mb-3",children:"Bead Image"}),(0,k.jsxs)("div",{className:"upload-container d-flex justify-content-center align-items-center p-4",style:{border:"2px dashed #ccc",borderRadius:"8px",minHeight:"200px",backgroundColor:R.values.imageUrl?"transparent":"#f8f9fa",position:"relative",flexDirection:"column",overflow:"hidden"},children:[O&&(0,k.jsx)("div",{className:"position-absolute w-100 h-100",style:{top:0,left:0,backgroundColor:"rgba(173, 216, 230, 0.5)",zIndex:10,borderRadius:"8px"}}),j?(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)(u.A,{icon:"Loop",size:"3x",className:"spinning"}),(0,k.jsx)("p",{children:"Uploading image..."})]}):(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)(u.A,{icon:"CloudUpload",size:"3x"}),(0,k.jsx)("p",{children:"Drag and drop image here or click to select"}),(0,k.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:B,className:"d-none",id:"imageUpload"}),(0,k.jsx)("label",{htmlFor:"imageUpload",className:"btn btn-sm btn-outline-primary mt-2",children:"Select Image"}),L.length>0?(0,k.jsx)("div",{className:"row g-5 mt-3",children:L.map(((e,a)=>(0,k.jsx)("div",{className:"col-auto",children:(0,k.jsxs)("div",{className:"position-relative",style:{width:"100px",height:"120px"},children:[(0,k.jsx)("img",{src:e,alt:`Preview ${a}`,className:"img-fluid rounded",style:{width:"100%",height:"100%",objectFit:"cover"}}),(0,k.jsx)("button",{type:"button",className:"btn btn-danger btn-sm position-absolute d-flex justify-content-center align-items-center",style:{top:"-6px",right:"-6px",width:"24px",height:"24px",borderRadius:"50%",padding:0,fontSize:"16px",lineHeight:"1"},onClick:()=>(e=>{URL.revokeObjectURL(L[e]),U((a=>a.filter(((a,i)=>i!==e)))),S((a=>a.filter(((a,i)=>i!==e))))})(a),children:"\xd7"})]})},a)))}):null]})]})]}),(0,k.jsxs)("div",{className:"col-md-12",children:[(0,k.jsx)("h5",{className:"mb-3",children:"Physical Properties"}),(0,k.jsxs)("div",{className:"row g-3",children:[(0,k.jsx)(v.A,{id:"material",label:"Material",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"material",onChange:R.handleChange,value:R.values.material,required:!0})}),(0,k.jsx)(v.A,{id:"color",label:"Color",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"color",onChange:R.handleChange,value:R.values.color})}),(0,k.jsx)(v.A,{id:"size",label:"Size (mm)",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"size",type:"number",onChange:R.handleChange,value:R.values.size,min:0,step:.1})}),(0,k.jsx)(v.A,{id:"shape",label:"Shape",className:"col-md-4",children:(0,k.jsxs)(I.A,{name:"shape",onChange:R.handleChange,value:R.values.shape,ariaLabel:"Select shape",children:[(0,k.jsx)("option",{value:"",children:"Select shape"}),["Round","Oval","Cube","Cylinder","Heart","Star","Bicone","Drop","Petal","Donut"].map((e=>(0,k.jsx)("option",{value:e,children:e},e)))]})}),(0,k.jsx)(v.A,{id:"weight",label:"Weight (g)",className:"col-md-4",children:(0,k.jsx)(p.A,{name:"weight",type:"number",onChange:R.handleChange,value:R.values.weight,min:0,step:.01})}),(0,k.jsx)(v.A,{id:"finish",label:"Finish",className:"col-md-4",children:(0,k.jsxs)(I.A,{name:"finish",onChange:R.handleChange,value:R.values.finish,ariaLabel:"Select finish",children:[(0,k.jsx)("option",{value:"",children:"Select finish"}),["Matte","Glossy","Metallic","Pearl","Transparent","Opaque","Iridescent"].map((e=>(0,k.jsx)("option",{value:e,children:e},e)))]})})]})]}),(0,k.jsxs)("div",{className:"col-md-12",children:[(0,k.jsx)("h5",{className:"mb-3",children:"Inventory Information"}),(0,k.jsxs)("div",{className:"row g-3",children:[(0,k.jsx)(v.A,{id:"quantity",label:"Quantity",className:"col-md-3",children:(0,k.jsx)(p.A,{name:"quantity",type:"number",onChange:R.handleChange,value:R.values.quantity,min:0})}),(0,k.jsx)(v.A,{id:"pricePerUnit",label:"Price Per Unit",className:"col-md-3",children:(0,k.jsx)(p.A,{name:"pricePerUnit",type:"number",onChange:R.handleChange,value:R.values.pricePerUnit,min:0,step:.01})}),(0,k.jsx)(v.A,{id:"unitOfMeasure",label:"Unit of Measure",className:"col-md-3",children:(0,k.jsx)(I.A,{name:"unitOfMeasure",onChange:R.handleChange,value:R.values.unitOfMeasure,ariaLabel:"Select unit",children:["pieces","grams","ounces","pounds","kilograms"].map((e=>(0,k.jsx)("option",{value:e,children:e},e)))})}),(0,k.jsx)(v.A,{id:"supplier",label:"Supplier",className:"col-md-3",children:(0,k.jsx)(p.A,{name:"supplier",onChange:R.handleChange,value:R.values.supplier})}),(0,k.jsx)(v.A,{id:"productCode",label:"Product Code",className:"col-md-3",children:(0,k.jsx)(p.A,{name:"productCode",onChange:R.handleChange,value:R.values.productCode})})]})]}),(0,k.jsx)("div",{className:"col-md-12",children:(0,k.jsx)("div",{className:"row g-3",children:(0,k.jsx)(v.A,{id:"description",label:"Description",className:"col-md-12",children:(0,k.jsx)(w.A,{name:"description",rows:3,onChange:R.handleChange,value:R.values.description})})})})]})}),(0,k.jsxs)(y.jl,{className:"p-4",children:[(0,k.jsx)(m.A,{color:"secondary",onClick:()=>r(!1),children:"Cancel"}),(0,k.jsx)(m.A,{color:"primary",type:"button",onClick:()=>R.handleSubmit(),isDisable:N,children:N?"Processing...":t?"Update Bead":"Add Bead"})]})]})})};var U=i(73980);const O=e=>{if(void 0===e||null===e)return"primary";try{const a="string"===typeof e?parseInt(e,10)||0:e;return(0,A.$)(Math.abs(a)%20)}catch{return"primary"}},F=()=>{var e,a;const{darkModeStatus:i}=(0,f.A)(),[A,w]=(0,l.useState)(1),[I,z]=(0,l.useState)(h.CQ[10]),[F,q]=(0,l.useState)(null),[D,T]=(0,l.useState)(!1),[R,B]=(0,l.useState)(!1),[E]=(0,P.iS)(),[M,$]=(0,l.useState)({isOpen:!1,src:"",name:""}),{data:_,isLoading:Q,isError:W,refetch:V}=(0,P.$o)({page_number:A,page_size:I}),H=Array.isArray(null===_||void 0===_||null===(e=_.data)||void 0===e?void 0:e.data)?null===(a=_.data)||void 0===a?void 0:a.data:[],J=(0,s.Wx)({initialValues:{searchInput:"",payment:Object.keys(g.A).map((e=>g.A[e].name)),minPrice:"",maxPrice:"",beadType:""},onSubmit:e=>{}}),G=H.filter((e=>{var a,i;return!!e&&(((null===(a=e.beadName)||void 0===a?void 0:a.toLowerCase().includes(J.values.searchInput.toLowerCase()))?""===J.values.beadType||(null===(i=e.beadType)||void 0===i?void 0:i.toLowerCase())===J.values.beadType.toLowerCase():"")&&(""===J.values.minPrice||(e.pricePerUnit||0)>=Number(J.values.minPrice))&&(""===J.values.maxPrice||(e.pricePerUnit||0)<=Number(J.values.maxPrice)))})),{items:K,requestSort:Y,getClassNamesFor:X}=(0,j.A)(G),Z=()=>{V()};return Q?(0,k.jsx)("div",{className:"text-center py-5",children:"Loading beads..."}):W?(0,k.jsx)("div",{className:"text-center py-5",children:"Error loading beads data"}):(0,k.jsxs)(n.A,{title:t.P9.crm.subMenu.customersList.text,children:[(0,k.jsxs)(d.Ay,{children:[(0,k.jsxs)(d.n5,{children:[(0,k.jsx)("label",{className:"border-0 bg-transparent cursor-pointer me-0",htmlFor:"searchInput",children:(0,k.jsx)(u.A,{icon:"Search",size:"2x",color:"primary"})}),(0,k.jsx)(p.A,{id:"searchInput",type:"search",className:"border-0 shadow-none bg-transparent",placeholder:"Search beads...",onChange:J.handleChange,value:J.values.searchInput})]}),(0,k.jsxs)(d.qb,{children:[(0,k.jsxs)(x.Ay,{children:[(0,k.jsx)(x.C,{hasIcon:!1,children:(0,k.jsx)(m.A,{icon:"FilterAlt",color:"dark",isLight:!0,className:"btn-only-icon position-relative","aria-label":"Filter",children:H.length!==G.length&&(0,k.jsx)(N.A,{desc:"Filtering applied",trigger:"hover",children:(0,k.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge border border-light rounded-circle bg-danger p-2",children:(0,k.jsx)("span",{className:"visually-hidden",children:"there is filtering"})})})})}),(0,k.jsx)(x.rI,{isAlignmentEnd:!0,size:"lg",children:(0,k.jsx)("div",{className:"container py-2",children:(0,k.jsxs)("div",{className:"row g-3",children:[(0,k.jsx)(v.A,{label:"Price Range",className:"col-12",children:(0,k.jsxs)(b.A,{children:[(0,k.jsx)(p.A,{id:"minPrice",ariaLabel:"Minimum price",placeholder:"Min.",onChange:J.handleChange,value:J.values.minPrice,type:"number"}),(0,k.jsx)(b.z,{children:"to"}),(0,k.jsx)(p.A,{id:"maxPrice",ariaLabel:"Maximum price",placeholder:"Max.",onChange:J.handleChange,value:J.values.maxPrice,type:"number"})]})}),(0,k.jsx)(v.A,{label:"Bead Type",className:"col-12",children:(0,k.jsx)(p.A,{id:"beadType",ariaLabel:"Bead Type",placeholder:"Filter by type",onChange:J.handleChange,value:J.values.beadType})})]})})})]}),(0,k.jsx)(d.ro,{}),(0,k.jsx)(m.A,{icon:"PersonAdd",color:"primary",isLight:!0,onClick:()=>{B(!0),q(null)},children:"New Bead"})]})]}),(0,k.jsx)(r.A,{children:(0,k.jsx)("div",{className:"row h-100",children:(0,k.jsx)("div",{className:"col-12",children:(0,k.jsxs)(c.Ay,{stretch:!0,children:[(0,k.jsx)(c.bw,{isScrollable:!0,className:"table-responsive",children:(0,k.jsxs)("table",{className:"table table-modern table-hover",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsxs)("th",{onClick:()=>Y("_id"),className:"cursor-pointer",children:["Bead ID"," ",(0,k.jsx)(u.A,{size:"lg",className:X("_id"),icon:"FilterList"})]}),(0,k.jsx)("th",{children:"Bead Name"}),(0,k.jsx)("th",{children:"Bead Type"}),(0,k.jsx)("th",{children:"Color"}),(0,k.jsx)("th",{children:"Size"}),(0,k.jsx)("th",{children:"Shape"}),(0,k.jsxs)("th",{onClick:()=>Y("pricePerUnit"),className:"cursor-pointer",children:["Price"," ",(0,k.jsx)(u.A,{size:"lg",className:X("pricePerUnit"),icon:"FilterList"})]}),(0,k.jsx)("th",{children:"Quantity"}),(0,k.jsx)("th",{children:"QR Code"}),(0,k.jsx)("th",{children:"Actions"})]})}),(0,k.jsx)("tbody",{children:(0,h.li)(K,A,I).map((e=>{var a,l;return(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:(0,k.jsx)("div",{className:"d-flex align-items-center",children:(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("div",{className:"ratio ratio-1x1 me-3",style:{width:48},children:(0,k.jsx)("div",{className:`bg-l${i?"o25":"25"}-${O(null===e||void 0===e?void 0:e._id)} text-${O(null===e||void 0===e?void 0:e._id)} rounded-2 d-flex align-items-center justify-content-center`,children:(0,k.jsx)("span",{className:"fw-bold",children:(0,o.Vz)((null===e||void 0===e?void 0:e.beadName)||"")})})})})})}),(0,k.jsx)("td",{children:(0,k.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.beadName)||"N/A"})}),(0,k.jsx)("td",{children:(0,k.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.beadType)||"N/A"})}),(0,k.jsx)("td",{children:(0,k.jsx)("div",{className:"fs-6 fw-bold",children:(0,k.jsx)("span",{className:"badge p-2",style:{backgroundColor:(null===e||void 0===e||null===(a=e.color)||void 0===a?void 0:a.toLowerCase())||"transparent"},children:(null===e||void 0===e?void 0:e.color)||"N/A"})})}),(0,k.jsx)("td",{children:(0,k.jsx)("div",{className:"fs-6 fw-bold",children:null!==e&&void 0!==e&&e.size?`${e.size}mm`:"N/A"})}),(0,k.jsx)("td",{children:(0,k.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.shape)||"N/A"})}),(0,k.jsx)("td",{children:(0,k.jsxs)("div",{className:"fs-6 fw-bold",children:["$",(null===e||void 0===e||null===(l=e.pricePerUnit)||void 0===l?void 0:l.toFixed(2))||"0.00"]})}),(0,k.jsx)("td",{children:(0,k.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.quantity)||"0"})}),(0,k.jsx)("td",{children:null!==e&&void 0!==e&&e.qrCode?(0,k.jsx)("div",{className:"d-flex justify-content-center",onClick:()=>$({isOpen:!0,src:`https://kandi-backend.cradle.services/${e.qrCode}`,name:null===e||void 0===e?void 0:e.beadName}),children:(0,k.jsx)("div",{style:{width:"50px",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",transition:"all 0.3s ease",cursor:"pointer"},className:"hover-scale",children:(0,k.jsx)("img",{src:`https://kandi-backend.cradle.services/${e.qrCode}`,alt:"QR Code",style:{width:"100%",height:"100%",objectFit:"contain",transition:"all 0.3s ease"},className:"hover-transform-scale"})})}):(0,k.jsx)("div",{className:"fs-6 text-muted text-center",children:"No QR"})}),(0,k.jsx)("td",{children:(0,k.jsxs)(x.Ay,{children:[(0,k.jsx)(x.C,{hasIcon:!1,children:(0,k.jsx)(m.A,{icon:"MoreHoriz",color:"dark",isLight:!0,shadow:"sm","aria-label":"More actions"})}),(0,k.jsxs)(x.rI,{isAlignmentEnd:!0,children:[(0,k.jsx)(x.tJ,{children:(0,k.jsx)(m.A,{icon:"Edit",tag:"a",onClick:()=>{T(!0),q(e)},children:"Edit"})}),(0,k.jsx)(x.tJ,{children:(0,k.jsx)(m.A,{icon:"Delete",color:"danger",isLight:!0,tag:"a",onClick:()=>(async e=>{if(e&&window.confirm("Are you sure you want to delete this bead?"))try{await E(e).unwrap(),Z(),(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:"Bead Deleted"})]}),"Bead has been deleted successfully.")}catch(a){console.error("Failed to delete bead:",a),(0,C.A)((0,k.jsxs)("span",{className:"d-flex align-items-center",children:[(0,k.jsx)(u.A,{icon:"Error",size:"lg",className:"me-1"}),(0,k.jsx)("span",{children:"Error"})]}),"Failed to delete bead. Please try again.")}})(null===e||void 0===e?void 0:e._id),children:"Delete"})})]})]})})]},(null===e||void 0===e?void 0:e._id)||Math.random())}))})]})}),(0,k.jsx)(h.Ay,{data:G,label:"beads",setCurrentPage:w,currentPage:A,perPage:I,setPerPage:z})]})})})}),(0,k.jsxs)(y.Ay,{isOpen:!1,setIsOpen:()=>$({isOpen:!1,src:"",name:""}),titleId:"qr-modal",isCentered:!0,isScrollable:!0,size:"sm",children:[(0,k.jsx)(y.rQ,{setIsOpen:()=>$({isOpen:!1,src:"",name:""}),children:"QR Code"}),(0,k.jsx)(y.cw,{children:(0,k.jsx)("div",{className:"text-center",children:(0,k.jsx)("img",{src:M.src,alt:"Full Size QR Code",style:{width:"100%",height:"auto"}})})})]}),(0,k.jsx)(U.A,{isOpen:M.isOpen,setIsOpen:()=>$({...M,isOpen:!1,src:"",name:""}),beadName:M.name,qrUrl:M.src}),(0,k.jsx)(S,{setIsOpen:T,isOpen:D,id:(null===F||void 0===F?void 0:F._id)||"",editItem:F,onSuccess:Z}),(0,k.jsx)(L,{setIsOpen:B,isOpen:R,onSuccess:Z,id:""})]})}},73980:(e,a,i)=>{i.d(a,{A:()=>u});var l=i(65043),s=i(93141),n=i(90074),d=i.n(n),r=i(52205),t=i(70545),c=i(71007),o=i(12528),h=i(43856),m=i(70579);const u=e=>{let{isOpen:a,setIsOpen:i,beadName:n,qrUrl:u,qrImageUrl:p}=e;const[x,v]=(0,l.useState)(1),[g,j]=(0,l.useState)("A4"),[b,N]=(e=>{switch(e){case"A1":return[594,841];case"A2":return[420,594];case"A3":return[297,420];case"A4":default:return[210,297];case"Letter":return[215.9,279.4]}})(g),A=(0,l.useRef)(null),f=(0,s.useReactToPrint)({contentRef:A,documentTitle:"",pageStyle:`\n    @page {\n      size: ${g};\n      margin: 0;\n    }\n    html, body {\n      margin: 0 !important;\n      padding: 0 !important;\n      height: 100%;\n      width: 100%;\n      -webkit-print-color-adjust: exact !important;\n      print-color-adjust: exact !important;\n      background: white;\n    }\n    div {\n      break-after: page;\n    }\n  `});return a?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(r.Ay,{isOpen:a,setIsOpen:i,size:"md",titleId:"qr-template-modal",children:[(0,m.jsx)(r.rQ,{setIsOpen:i,children:(0,m.jsx)(r.wt,{id:"qr-template-modal",children:"Print QR Codes"})}),(0,m.jsxs)(r.cw,{children:[(0,m.jsxs)("div",{className:"row g-3",children:[(0,m.jsx)(t.A,{label:"Sheet Size",className:"col-md-6",children:(0,m.jsxs)(o.A,{value:g,onChange:e=>j(e.target.value),ariaLabel:"Sheet Size",children:[(0,m.jsx)("option",{value:"A1",children:"A1"}),(0,m.jsx)("option",{value:"A2",children:"A2"}),(0,m.jsx)("option",{value:"A3",children:"A3"}),(0,m.jsx)("option",{value:"A4",children:"A4"}),(0,m.jsx)("option",{value:"Letter",children:"Letter"})]})}),(0,m.jsx)(t.A,{label:"Quantity",className:"col-md-6",children:(0,m.jsx)(c.A,{type:"number",min:1,value:x,onChange:e=>v(Number(e.target.value))})})]}),(0,m.jsx)("div",{className:"d-flex justify-content-center mt-4",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("img",{src:p||u,alt:`QR Code for ${n}`,style:{width:200,height:200}}),(0,m.jsx)("div",{className:"mt-2 h4",children:n})]})})]}),(0,m.jsxs)(r.jl,{children:[(0,m.jsx)(h.A,{icon:"Print",color:"info",isLight:!0,onClick:f,children:"Print"}),(0,m.jsx)(h.A,{icon:"PictureAsPdf",color:"danger",isLight:!0,onClick:()=>{if(!A.current)return;const e={margin:0,filename:`${n}_QR_Codes.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:[b,N],orientation:"portrait"}};d()().set(e).from(A.current).save()},children:"PDF"})]})]}),(0,m.jsx)("div",{style:{display:"none"},children:(0,m.jsx)("div",{ref:A,children:[...Array(x)].map(((e,a)=>(0,m.jsxs)("div",{className:"qr-pdf-page",style:{height:`${N}mm`,width:`${b}mm`,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,m.jsx)("img",{src:p||u,alt:`QR Code Page ${a+1}`,style:{width:"80%",height:"80%",objectFit:"contain",marginTop:-200}}),(0,m.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold"},children:n})]},a)))})})]}):null}}}]);
//# sourceMappingURL=6178.4741a423.chunk.js.map