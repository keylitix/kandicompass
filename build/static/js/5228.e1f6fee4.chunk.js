(self.webpackChunkfacit=self.webpackChunkfacit||[]).push([[5228],{7759:(e,n,i)=>{"use strict";i.d(n,{A:()=>s});const s={PAYPAL:{name:"PayPal"},PAYONEER:{name:"Payoneer"},SWIFT:{name:"Swift"}}},96178:(e,n,i)=>{"use strict";i.r(n),i.d(n,{default:()=>B});var s=i(65043),a=i(70949),l=i(30242),t=i(32922),r=i(26930),o=i(97043),d=i(47819),c=i(64761),u=i(26718),h=i(43856),m=i(92475),p=i(71007),v=i(8323),g=i(70545),x=i(7759),b=i(49338),j=i(87317),f=i(50974),y=i(81490),N=i(22137),A=i(52205),C=i(92601),w=i(14106),S=i(79628),P=i(70579);const E=e=>{let{id:n,isOpen:i,setIsOpen:l,editItem:t,onSuccess:r}=e;const[o,{isLoading:d}]=(0,S.sg)(),[c,u]=(0,s.useState)(!1),[v,x]=(0,s.useState)(""),b=(0,a.Wx)({initialValues:{beadName:(null===t||void 0===t?void 0:t.beadName)||"",beadType:(null===t||void 0===t?void 0:t.beadType)||"",material:(null===t||void 0===t?void 0:t.material)||"",color:(null===t||void 0===t?void 0:t.color)||"",size:(null===t||void 0===t?void 0:t.size)||0,shape:(null===t||void 0===t?void 0:t.shape)||"",weight:(null===t||void 0===t?void 0:t.weight)||0,finish:(null===t||void 0===t?void 0:t.finish)||"",quantity:(null===t||void 0===t?void 0:t.quantity)||0,pricePerUnit:(null===t||void 0===t?void 0:t.pricePerUnit)||0,supplier:(null===t||void 0===t?void 0:t.supplier)||"",productCode:(null===t||void 0===t?void 0:t.productCode)||"",description:(null===t||void 0===t?void 0:t.description)||"",image:(null===t||void 0===t?void 0:t.imageUrl)||""},enableReinitialize:!0,onSubmit:async e=>{try{const n={...e,size:Number(e.size),weight:Number(e.weight),quantity:Number(e.quantity),pricePerUnit:Number(e.pricePerUnit),image:v||e.image};await o({id:t._id,body:n}).unwrap();(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Bead Updated"})]}),`${e.beadName} has been updated successfully.`),x(""),l(!1),r&&r()}catch(n){console.error("Error updating bead:",n),(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"Error",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Error"})]}),"Failed to update bead. Please try again.")}}});(0,s.useEffect)((()=>{t&&(b.resetForm({values:{beadName:(null===t||void 0===t?void 0:t.beadName)||"",beadType:(null===t||void 0===t?void 0:t.beadType)||"",material:(null===t||void 0===t?void 0:t.material)||"",color:(null===t||void 0===t?void 0:t.color)||"",size:(null===t||void 0===t?void 0:t.size)||0,shape:(null===t||void 0===t?void 0:t.shape)||"",weight:(null===t||void 0===t?void 0:t.weight)||0,finish:(null===t||void 0===t?void 0:t.finish)||"",quantity:(null===t||void 0===t?void 0:t.quantity)||0,pricePerUnit:(null===t||void 0===t?void 0:t.pricePerUnit)||0,supplier:(null===t||void 0===t?void 0:t.supplier)||"",productCode:(null===t||void 0===t?void 0:t.productCode)||"",description:(null===t||void 0===t?void 0:t.description)||"",image:(null===t||void 0===t?void 0:t.imageUrl)||""}}),x(""))}),[t]);const j=v||b.values.image;return i?(0,P.jsxs)(A.Ay,{isOpen:i,setIsOpen:l,size:"xl",titleId:n,isStaticBackdrop:!0,children:[(0,P.jsx)(A.rQ,{setIsOpen:l,className:"p-4",children:(0,P.jsx)(A.wt,{id:n,children:"Edit Bead"})}),(0,P.jsx)(A.cw,{className:"px-4",children:(0,P.jsxs)("div",{className:"row g-4",children:[(0,P.jsx)(g.A,{id:"beadName",label:"Bead Name",className:"col-md-12",children:(0,P.jsx)(p.A,{name:"beadName",onChange:b.handleChange,value:b.values.beadName,required:!0})}),(0,P.jsx)(g.A,{label:"Bead Image",className:"col-12",children:(0,P.jsxs)("div",{className:"upload-container d-flex justify-content-center align-items-center p-4",style:{border:"2px dashed #ccc",borderRadius:"8px",minHeight:"200px",backgroundColor:j?"transparent":"#f8f9fa",position:"relative"},children:[c?(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)(m.A,{icon:"Loop",size:"3x",className:"spinning"}),(0,P.jsx)("p",{children:"Processing image..."})]}):j?(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)("img",{src:j,alt:"Bead preview",style:{maxHeight:"150px",maxWidth:"100%",marginBottom:"1rem",borderRadius:"4px"}}),(0,P.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[(0,P.jsx)(h.A,{color:"info",onClick:()=>{var e;return null===(e=document.getElementById("file-upload"))||void 0===e?void 0:e.click()},icon:"Image",isDisable:d,children:"Change Image"}),(0,P.jsx)(h.A,{color:"danger",onClick:()=>{x(""),b.setFieldValue("image","")},icon:"Delete",isDisable:d,children:"Remove"})]})]}):(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)("div",{className:"cloud-icon mb-3",children:(0,P.jsx)(m.A,{icon:"CloudUpload",size:"3x"})}),(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{style:{color:"#0d6efd"},children:"CLICK TO BROWSE"})," OR DRAG IT HERE"]}),(0,P.jsx)("p",{className:"text-muted",children:"JPG, PNG (Max 5MB)"}),(0,P.jsx)(h.A,{color:"info",onClick:()=>{var e;return null===(e=document.getElementById("file-upload"))||void 0===e?void 0:e.click()},icon:"Upload",isDisable:d,children:"Select Image"})]}),(0,P.jsx)("input",{type:"file",id:"file-upload",className:"d-none",onChange:async e=>{if(e.target.files&&e.target.files[0]){u(!0);const i=e.target.files[0];if(i.size>5242880)return(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"Error",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"File Too Large"})]}),"Maximum file size is 5MB. Please choose a smaller image."),void u(!1);try{const e=await(e=>new Promise(((n,i)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>n(s.result),s.onerror=e=>i(e)})))(i);x(e),(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Image Ready"})]}),"Image will be saved with the bead.")}catch(n){console.error("Error converting image:",n),(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"Error",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Upload Failed"})]}),"Failed to process image. Please try again.")}finally{u(!1)}}},accept:"image/*",disabled:c||d})]})}),(0,P.jsx)(g.A,{id:"beadType",label:"Bead Type",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"beadType",onChange:b.handleChange,value:b.values.beadType,required:!0})}),(0,P.jsx)(g.A,{id:"material",label:"Material",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"material",onChange:b.handleChange,value:b.values.material,required:!0})}),(0,P.jsx)(g.A,{id:"color",label:"Color",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"color",onChange:b.handleChange,value:b.values.color,required:!0})}),(0,P.jsx)(g.A,{id:"size",label:"Size (mm)",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"size",type:"number",onChange:b.handleChange,value:b.values.size,required:!0})}),(0,P.jsx)(g.A,{id:"shape",label:"Shape",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"shape",onChange:b.handleChange,value:b.values.shape,required:!0})}),(0,P.jsx)(g.A,{id:"weight",label:"Weight (g)",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"weight",type:"number",onChange:b.handleChange,value:b.values.weight,required:!0})}),(0,P.jsx)(g.A,{id:"finish",label:"Finish",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"finish",onChange:b.handleChange,value:b.values.finish})}),(0,P.jsx)(g.A,{id:"quantity",label:"Quantity",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"quantity",type:"number",onChange:b.handleChange,value:b.values.quantity,required:!0})}),(0,P.jsx)(g.A,{id:"pricePerUnit",label:"Price Per Unit ($)",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"pricePerUnit",type:"number",onChange:b.handleChange,value:b.values.pricePerUnit,required:!0})}),(0,P.jsx)(g.A,{id:"supplier",label:"Supplier",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"supplier",onChange:b.handleChange,value:b.values.supplier})}),(0,P.jsx)(g.A,{id:"productCode",label:"Product Code",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"productCode",onChange:b.handleChange,value:b.values.productCode})}),(0,P.jsx)(g.A,{id:"description",label:"Description",className:"col-md-12",children:(0,P.jsx)(w.A,{name:"description",rows:3,onChange:b.handleChange,value:b.values.description})})]})}),(0,P.jsxs)(A.jl,{className:"px-4 pb-4",children:[(0,P.jsx)(h.A,{color:"secondary",onClick:()=>l(!1),className:"me-2",isDisable:d,children:"Cancel"}),(0,P.jsx)(h.A,{color:"primary",onClick:()=>b.handleSubmit(),isDisable:d||c,children:d?"Updating...":"Update Bead"})]})]}):null};var k=i(12528),T=i(64603),I=i(17438);const L=e=>{var n,i;let{id:l,isOpen:t,setIsOpen:r,editItem:o,onSuccess:d}=e;const[c]=(0,S.oB)(),[u]=(0,S.sg)(),[v]=(0,S.ae)(),[x]=(0,S.iS)(),[b,j]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[N,E]=(0,s.useState)([]),[L,z]=(0,s.useState)([]),[U,O]=(0,s.useState)(!1),{data:R,isLoading:B}=(0,T.Hk)({page_number:1,page_size:100}),[D,q]=(null===R||void 0===R||null===(n=R.data)||void 0===n||n.data,(0,s.useState)("")),[F,M]=(0,s.useState)(""),{data:W=[],isLoading:$}=(0,I.VL)({pageNo:1,pageSize:100}),{data:_,isLoading:H}=(0,T.nB)(F,{skip:!F}),Q=(null===_||void 0===_?void 0:_.data)||[];console.log("threadsByOwner",Q);(0,s.useEffect)((()=>{t||(L.forEach(URL.revokeObjectURL),z([]),E([]))}),[t]);const V=(0,a.Wx)({initialValues:{beadName:(null===o||void 0===o?void 0:o.beadName)||"",beadType:(null===o||void 0===o?void 0:o.beadType)||"",threadId:(null===o||void 0===o?void 0:o._id)||"",material:(null===o||void 0===o?void 0:o.material)||"",color:(null===o||void 0===o?void 0:o.color)||"",size:(null===o||void 0===o?void 0:o.size)||0,shape:(null===o||void 0===o?void 0:o.shape)||"",weight:(null===o||void 0===o?void 0:o.weight)||0,finish:(null===o||void 0===o?void 0:o.finish)||"",quantity:(null===o||void 0===o?void 0:o.quantity)||0,pricePerUnit:(null===o||void 0===o?void 0:o.pricePerUnit)||0,supplier:(null===o||void 0===o?void 0:o.supplier)||"",productCode:(null===o||void 0===o?void 0:o.productCode)||"",description:(null===o||void 0===o?void 0:o.description)||"",imageUrl:(null===o||void 0===o?void 0:o.imageUrl)||"",unitOfMeasure:(null===o||void 0===o?void 0:o.unitOfMeasure)||"pieces",inventoryLocation:(null===o||void 0===o?void 0:o.inventoryLocation)||"",minimumStockLevel:(null===o||void 0===o?void 0:o.minimumStockLevel)||0,maximumStockLevel:(null===o||void 0===o?void 0:o.maximumStockLevel)||0,reorderPoint:(null===o||void 0===o?void 0:o.reorderPoint)||0,leadTimeDays:(null===o||void 0===o?void 0:o.leadTimeDays)||0,isActive:null===(i=null===o||void 0===o?void 0:o.isActive)||void 0===i||i,tags:(null===o||void 0===o?void 0:o.tags)||[],notes:(null===o||void 0===o?void 0:o.notes)||"",data:void 0,updatedAt:void 0,createdAt:void 0},enableReinitialize:!0,onSubmit:async e=>{y(!0);try{let n=null===o||void 0===o?void 0:o._id,i=[];if(n){if(N.length>0){j(!0);const e=new FormData;N.forEach((n=>e.append("files",n)));const s=await v({beadId:n,formData:e}).unwrap();if(null===s||void 0===s||!s.images||0===s.images.length)throw new Error("Image upload failed.");i=s.images}await u({id:n,body:{...e,imageUrl:i[0]||e.imageUrl}}).unwrap()}else{if(n=(await c(e).unwrap()).data._doc._id,!n)throw new Error("Bead creation failed.");if(N.length>0){j(!0);const e=new FormData;N.forEach((n=>e.append("files",n)));const s=await v({beadId:n,formData:e}).unwrap();if(null===s||void 0===s||!s.images||0===s.images.length)throw await x(n).unwrap(),new Error("Image upload failed. Bead has been deleted.");i=s.images}}(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:o?"Bead Updated":"Bead Added"})]}),`${e.beadName} has been ${o?"updated":"added"} successfully.`),V.resetForm(),r(!1),null===d||void 0===d||d()}catch(n){(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"Error",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Error"})]}),`Failed to ${o?"update":"add"} bead. ${(null===n||void 0===n?void 0:n.message)||"Please try again."}`)}finally{y(!1),j(!1)}}}),G=e=>{let n=[];"dataTransfer"in e?(e.preventDefault(),n=Array.from(e.dataTransfer.files)):e.target.files&&(n=Array.from(e.target.files));const i=[],s=[];for(const a of n)a.size>5242880||!a.type.startsWith("image/")?(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"Error",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Invalid File"})]}),`${a.name} is too large or not an image.`):(i.push(a),s.push(URL.createObjectURL(a)));E((e=>[...e,...i])),z((e=>[...e,...s]))};if(!t)return null;return(0,P.jsx)("div",{onDragOver:e=>{e.preventDefault()},onDragEnter:()=>{O(!0)},onDragLeave:()=>{O(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),O(!1),G(e)},style:{width:"100vw",height:"100vh"},children:(0,P.jsxs)(A.Ay,{isOpen:t,setIsOpen:r,size:"lg",titleId:l,isStaticBackdrop:!0,children:[(0,P.jsx)(A.rQ,{setIsOpen:r,className:"p-4",children:(0,P.jsx)(A.wt,{id:l,children:o?"Edit Bead":"Add New Bead"})}),(0,P.jsx)(A.cw,{className:"px-4",children:(0,P.jsxs)("div",{className:"row g-4",children:[(0,P.jsxs)("div",{className:"col-md-12",children:[(0,P.jsx)("h5",{className:"mb-3",children:"Basic Information"}),(0,P.jsxs)("div",{className:"row g-3",children:[(0,P.jsx)(g.A,{id:"beadName",label:"Bead Name",className:"col-md-6",children:(0,P.jsx)(p.A,{name:"beadName",onChange:V.handleChange,value:V.values.beadName,required:!0})}),(0,P.jsx)(g.A,{id:"beadType",label:"Bead Type",className:"col-md-6",children:(0,P.jsx)(p.A,{name:"beadType",onChange:V.handleChange,value:V.values.beadType,required:!0})}),(0,P.jsx)(g.A,{label:"Select User",className:"col-md-6",children:(0,P.jsxs)(k.A,{name:"userId",ariaLabel:"Select User",value:F,onChange:e=>{const n=e.target.value;M(n),V.setFieldValue("threadId","")},disabled:$,children:[(0,P.jsx)("option",{value:"",children:"Select a user"}),W.map((e=>(0,P.jsx)("option",{value:e._id,children:e.fullName},e._id)))]})}),(0,P.jsx)(g.A,{label:"Select User Thread ",className:"col-md-6",children:(0,P.jsxs)(k.A,{name:"threadId",ariaLabel:"Select Thread",onChange:V.handleChange,value:V.values.threadId,disabled:!F||H,children:[(0,P.jsx)("option",{value:"",children:"Select a thread"}),Q.map((e=>(0,P.jsx)("option",{value:e._id,children:e.threadName},e._id)))]})})]})]}),(0,P.jsxs)("div",{className:"col-md-12",children:[(0,P.jsx)("h5",{className:"mb-3",children:"Bead Image"}),(0,P.jsxs)("div",{className:"upload-container d-flex justify-content-center align-items-center p-4",style:{border:"2px dashed #ccc",borderRadius:"8px",minHeight:"200px",backgroundColor:V.values.imageUrl?"transparent":"#f8f9fa",position:"relative",flexDirection:"column",overflow:"hidden"},children:[U&&(0,P.jsx)("div",{className:"position-absolute w-100 h-100",style:{top:0,left:0,backgroundColor:"rgba(173, 216, 230, 0.5)",zIndex:10,borderRadius:"8px"}}),b?(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)(m.A,{icon:"Loop",size:"3x",className:"spinning"}),(0,P.jsx)("p",{children:"Uploading image..."})]}):(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)(m.A,{icon:"CloudUpload",size:"3x"}),(0,P.jsx)("p",{children:"Drag and drop image here or click to select"}),(0,P.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:G,className:"d-none",id:"imageUpload"}),(0,P.jsx)("label",{htmlFor:"imageUpload",className:"btn btn-sm btn-outline-primary mt-2",children:"Select Image"}),L.length>0?(0,P.jsx)("div",{className:"row g-5 mt-3",children:L.map(((e,n)=>(0,P.jsx)("div",{className:"col-auto",children:(0,P.jsxs)("div",{className:"position-relative",style:{width:"100px",height:"120px"},children:[(0,P.jsx)("img",{src:e,alt:`Preview ${n}`,className:"img-fluid rounded",style:{width:"100%",height:"100%",objectFit:"cover"}}),(0,P.jsx)("button",{type:"button",className:"btn btn-danger btn-sm position-absolute d-flex justify-content-center align-items-center",style:{top:"-6px",right:"-6px",width:"24px",height:"24px",borderRadius:"50%",padding:0,fontSize:"16px",lineHeight:"1"},onClick:()=>(e=>{URL.revokeObjectURL(L[e]),z((n=>n.filter(((n,i)=>i!==e)))),E((n=>n.filter(((n,i)=>i!==e))))})(n),children:"\xd7"})]})},n)))}):null]})]})]}),(0,P.jsxs)("div",{className:"col-md-12",children:[(0,P.jsx)("h5",{className:"mb-3",children:"Physical Properties"}),(0,P.jsxs)("div",{className:"row g-3",children:[(0,P.jsx)(g.A,{id:"material",label:"Material",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"material",onChange:V.handleChange,value:V.values.material,required:!0})}),(0,P.jsx)(g.A,{id:"color",label:"Color",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"color",onChange:V.handleChange,value:V.values.color})}),(0,P.jsx)(g.A,{id:"size",label:"Size (mm)",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"size",type:"number",onChange:V.handleChange,value:V.values.size,min:0,step:.1})}),(0,P.jsx)(g.A,{id:"shape",label:"Shape",className:"col-md-4",children:(0,P.jsxs)(k.A,{name:"shape",onChange:V.handleChange,value:V.values.shape,ariaLabel:"Select shape",children:[(0,P.jsx)("option",{value:"",children:"Select shape"}),["Round","Oval","Cube","Cylinder","Heart","Star","Bicone","Drop","Petal","Donut"].map((e=>(0,P.jsx)("option",{value:e,children:e},e)))]})}),(0,P.jsx)(g.A,{id:"weight",label:"Weight (g)",className:"col-md-4",children:(0,P.jsx)(p.A,{name:"weight",type:"number",onChange:V.handleChange,value:V.values.weight,min:0,step:.01})}),(0,P.jsx)(g.A,{id:"finish",label:"Finish",className:"col-md-4",children:(0,P.jsxs)(k.A,{name:"finish",onChange:V.handleChange,value:V.values.finish,ariaLabel:"Select finish",children:[(0,P.jsx)("option",{value:"",children:"Select finish"}),["Matte","Glossy","Metallic","Pearl","Transparent","Opaque","Iridescent"].map((e=>(0,P.jsx)("option",{value:e,children:e},e)))]})})]})]}),(0,P.jsxs)("div",{className:"col-md-12",children:[(0,P.jsx)("h5",{className:"mb-3",children:"Inventory Information"}),(0,P.jsxs)("div",{className:"row g-3",children:[(0,P.jsx)(g.A,{id:"quantity",label:"Quantity",className:"col-md-3",children:(0,P.jsx)(p.A,{name:"quantity",type:"number",onChange:V.handleChange,value:V.values.quantity,min:0})}),(0,P.jsx)(g.A,{id:"pricePerUnit",label:"Price Per Unit",className:"col-md-3",children:(0,P.jsx)(p.A,{name:"pricePerUnit",type:"number",onChange:V.handleChange,value:V.values.pricePerUnit,min:0,step:.01})}),(0,P.jsx)(g.A,{id:"unitOfMeasure",label:"Unit of Measure",className:"col-md-3",children:(0,P.jsx)(k.A,{name:"unitOfMeasure",onChange:V.handleChange,value:V.values.unitOfMeasure,ariaLabel:"Select unit",children:["pieces","grams","ounces","pounds","kilograms"].map((e=>(0,P.jsx)("option",{value:e,children:e},e)))})}),(0,P.jsx)(g.A,{id:"supplier",label:"Supplier",className:"col-md-3",children:(0,P.jsx)(p.A,{name:"supplier",onChange:V.handleChange,value:V.values.supplier})}),(0,P.jsx)(g.A,{id:"productCode",label:"Product Code",className:"col-md-3",children:(0,P.jsx)(p.A,{name:"productCode",onChange:V.handleChange,value:V.values.productCode})})]})]}),(0,P.jsx)("div",{className:"col-md-12",children:(0,P.jsx)("div",{className:"row g-3",children:(0,P.jsx)(g.A,{id:"description",label:"Description",className:"col-md-12",children:(0,P.jsx)(w.A,{name:"description",rows:3,onChange:V.handleChange,value:V.values.description})})})})]})}),(0,P.jsxs)(A.jl,{className:"p-4",children:[(0,P.jsx)(h.A,{color:"secondary",onClick:()=>r(!1),children:"Cancel"}),(0,P.jsx)(h.A,{color:"primary",type:"button",onClick:()=>V.handleSubmit(),isDisable:f,children:f?"Processing...":o?"Update Bead":"Add Bead"})]})]})})};var z=i(73980),U=i(93981),O=i(82151);const R=e=>{if(void 0===e||null===e)return"primary";try{const n="string"===typeof e?parseInt(e,10)||0:e;return(0,y.$)(Math.abs(n)%20)}catch{return"primary"}},B=()=>{var e,n;const{darkModeStatus:i}=(0,N.A)(),[y,w]=(0,s.useState)(1),[k,T]=(0,s.useState)(u.CQ[10]),[I,B]=(0,s.useState)(null),[D,q]=(0,s.useState)(!1),[F,M]=(0,s.useState)(!1),[W]=(0,S.iS)(),[$,_]=(0,s.useState)({isOpen:!1,src:"",name:""}),{data:H,isLoading:Q,isError:V,refetch:G}=(0,S.$o)({page_number:y,page_size:k}),Y=Array.isArray(null===H||void 0===H||null===(e=H.data)||void 0===e?void 0:e.data)?null===(n=H.data)||void 0===n?void 0:n.data:[],J=(0,a.Wx)({initialValues:{searchInput:"",payment:Object.keys(x.A).map((e=>x.A[e].name)),minPrice:"",maxPrice:"",beadType:""},onSubmit:e=>{}}),K=Y.filter((e=>{var n,i;return!!e&&(((null===(n=e.beadName)||void 0===n?void 0:n.toLowerCase().includes(J.values.searchInput.toLowerCase()))?""===J.values.beadType||(null===(i=e.beadType)||void 0===i?void 0:i.toLowerCase())===J.values.beadType.toLowerCase():"")&&(""===J.values.minPrice||(e.pricePerUnit||0)>=Number(J.values.minPrice))&&(""===J.values.maxPrice||(e.pricePerUnit||0)<=Number(J.values.maxPrice)))})),{items:X,requestSort:Z,getClassNamesFor:ee}=(0,b.A)(K),ne=()=>{G()};return Q?(0,P.jsx)(O.A,{}):V?(0,P.jsx)(U.A,{}):(0,P.jsxs)(l.A,{title:o.P9.crm.subMenu.customersList.text,children:[(0,P.jsxs)(t.Ay,{children:[(0,P.jsxs)(t.n5,{children:[(0,P.jsx)("label",{className:"border-0 bg-transparent cursor-pointer me-0",htmlFor:"searchInput",children:(0,P.jsx)(m.A,{icon:"Search",size:"2x",color:"primary"})}),(0,P.jsx)(p.A,{id:"searchInput",type:"search",className:"border-0 shadow-none bg-transparent",placeholder:"Search beads...",onChange:J.handleChange,value:J.values.searchInput})]}),(0,P.jsxs)(t.qb,{children:[(0,P.jsxs)(v.Ay,{children:[(0,P.jsx)(v.C,{hasIcon:!1,children:(0,P.jsx)(h.A,{icon:"FilterAlt",color:"dark",isLight:!0,className:"btn-only-icon position-relative","aria-label":"Filter",children:Y.length!==K.length&&(0,P.jsx)(f.A,{desc:"Filtering applied",trigger:"hover",children:(0,P.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge border border-light rounded-circle bg-danger p-2",children:(0,P.jsx)("span",{className:"visually-hidden",children:"there is filtering"})})})})}),(0,P.jsx)(v.rI,{isAlignmentEnd:!0,size:"lg",children:(0,P.jsx)("div",{className:"container py-2",children:(0,P.jsxs)("div",{className:"row g-3",children:[(0,P.jsx)(g.A,{label:"Price Range",className:"col-12",children:(0,P.jsxs)(j.A,{children:[(0,P.jsx)(p.A,{id:"minPrice",ariaLabel:"Minimum price",placeholder:"Min.",onChange:J.handleChange,value:J.values.minPrice,type:"number"}),(0,P.jsx)(j.z,{children:"to"}),(0,P.jsx)(p.A,{id:"maxPrice",ariaLabel:"Maximum price",placeholder:"Max.",onChange:J.handleChange,value:J.values.maxPrice,type:"number"})]})}),(0,P.jsx)(g.A,{label:"Bead Type",className:"col-12",children:(0,P.jsx)(p.A,{id:"beadType",ariaLabel:"Bead Type",placeholder:"Filter by type",onChange:J.handleChange,value:J.values.beadType})})]})})})]}),(0,P.jsx)(t.ro,{}),(0,P.jsx)(h.A,{icon:"PersonAdd",color:"primary",isLight:!0,onClick:()=>{M(!0),B(null)},children:"New Bead"})]})]}),(0,P.jsx)(r.A,{children:(0,P.jsx)("div",{className:"row h-100",children:(0,P.jsx)("div",{className:"col-12",children:(0,P.jsxs)(d.Ay,{stretch:!0,children:[(0,P.jsx)(d.bw,{isScrollable:!0,className:"table-responsive",children:(0,P.jsxs)("table",{className:"table table-modern table-hover",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsxs)("th",{onClick:()=>Z("_id"),className:"cursor-pointer",children:["Bead ID"," ",(0,P.jsx)(m.A,{size:"lg",className:ee("_id"),icon:"FilterList"})]}),(0,P.jsx)("th",{children:"Bead Name"}),(0,P.jsx)("th",{children:"Bead Type"}),(0,P.jsx)("th",{children:"Color"}),(0,P.jsx)("th",{children:"Size"}),(0,P.jsx)("th",{children:"Shape"}),(0,P.jsxs)("th",{onClick:()=>Z("pricePerUnit"),className:"cursor-pointer",children:["Price"," ",(0,P.jsx)(m.A,{size:"lg",className:ee("pricePerUnit"),icon:"FilterList"})]}),(0,P.jsx)("th",{children:"Quantity"}),(0,P.jsx)("th",{children:"QR Code"}),(0,P.jsx)("th",{children:"Actions"})]})}),(0,P.jsx)("tbody",{children:(0,u.li)(X,y,k).map((e=>{var n,s;return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"d-flex align-items-center",children:(0,P.jsx)("div",{className:"flex-shrink-0",children:(0,P.jsx)("div",{className:"ratio ratio-1x1 me-3",style:{width:48},children:(0,P.jsx)("div",{className:`bg-l${i?"o25":"25"}-${R(null===e||void 0===e?void 0:e._id)} text-${R(null===e||void 0===e?void 0:e._id)} rounded-2 d-flex align-items-center justify-content-center`,children:(0,P.jsx)("span",{className:"fw-bold",children:(0,c.Vz)((null===e||void 0===e?void 0:e.beadName)||"abc")})})})})})}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.beadName)||"N/A"})}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.beadType)||"N/A"})}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"fs-6 fw-bold",children:(0,P.jsx)("span",{className:"badge p-2",style:{backgroundColor:(null===e||void 0===e||null===(n=e.color)||void 0===n?void 0:n.toLowerCase())||"transparent"},children:(null===e||void 0===e?void 0:e.color)||"N/A"})})}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"fs-6 fw-bold",children:null!==e&&void 0!==e&&e.size?`${e.size}mm`:"N/A"})}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.shape)||"N/A"})}),(0,P.jsx)("td",{children:(0,P.jsxs)("div",{className:"fs-6 fw-bold",children:["$",(null===e||void 0===e||null===(s=e.pricePerUnit)||void 0===s?void 0:s.toFixed(2))||"0.00"]})}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"fs-6 fw-bold",children:(null===e||void 0===e?void 0:e.quantity)||"0"})}),(0,P.jsx)("td",{children:null!==e&&void 0!==e&&e.qrCode?(0,P.jsx)("div",{className:"d-flex justify-content-center",onClick:()=>_({isOpen:!0,src:`https://backend.kandicompass.com/${e.qrCode}`,name:null===e||void 0===e?void 0:e.beadName}),children:(0,P.jsx)("div",{style:{width:"50px",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",transition:"all 0.3s ease",cursor:"pointer"},className:"hover-scale",children:(0,P.jsx)("img",{src:`https://backend.kandicompass.com/${e.qrCode}`,alt:"QR Code",style:{width:"100%",height:"100%",objectFit:"contain",transition:"all 0.3s ease"},className:"hover-transform-scale"})})}):(0,P.jsx)("div",{className:"fs-6 text-muted text-center",children:"No QR"})}),(0,P.jsx)("td",{children:(0,P.jsxs)(v.Ay,{children:[(0,P.jsx)(v.C,{hasIcon:!1,children:(0,P.jsx)(h.A,{icon:"MoreHoriz",color:"dark",isLight:!0,shadow:"sm","aria-label":"More actions"})}),(0,P.jsxs)(v.rI,{isAlignmentEnd:!0,children:[(0,P.jsx)(v.tJ,{children:(0,P.jsx)(h.A,{icon:"Edit",tag:"a",onClick:()=>{q(!0),B(e)},children:"Edit"})}),(0,P.jsx)(v.tJ,{children:(0,P.jsx)(h.A,{icon:"Delete",color:"danger",isLight:!0,tag:"a",onClick:()=>(async e=>{if(e&&window.confirm("Are you sure you want to delete this bead?"))try{await W(e).unwrap(),ne(),(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"CheckCircle",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Bead Deleted"})]}),"Bead has been deleted successfully.")}catch(n){console.error("Failed to delete bead:",n),(0,C.A)((0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)(m.A,{icon:"Error",size:"lg",className:"me-1"}),(0,P.jsx)("span",{children:"Error"})]}),"Failed to delete bead. Please try again.")}})(null===e||void 0===e?void 0:e._id),children:"Delete"})})]})]})})]},(null===e||void 0===e?void 0:e._id)||Math.random())}))})]})}),(0,P.jsx)(u.Ay,{data:K,label:"beads",setCurrentPage:w,currentPage:y,perPage:k,setPerPage:T})]})})})}),(0,P.jsxs)(A.Ay,{isOpen:!1,setIsOpen:()=>_({isOpen:!1,src:"",name:""}),titleId:"qr-modal",isCentered:!0,isScrollable:!0,size:"sm",children:[(0,P.jsx)(A.rQ,{setIsOpen:()=>_({isOpen:!1,src:"",name:""}),children:"QR Code"}),(0,P.jsx)(A.cw,{children:(0,P.jsx)("div",{className:"text-center",children:(0,P.jsx)("img",{src:$.src,alt:"Full Size QR Code",style:{width:"100%",height:"auto"}})})})]}),(0,P.jsx)(z.A,{isOpen:$.isOpen,setIsOpen:()=>_({...$,isOpen:!1,src:"",name:""}),beadName:$.name,qrUrl:$.src}),(0,P.jsx)(E,{setIsOpen:q,isOpen:D,id:(null===I||void 0===I?void 0:I._id)||"",editItem:I,onSuccess:ne}),(0,P.jsx)(L,{setIsOpen:M,isOpen:F,onSuccess:ne,id:""})]})}},93141:function(e,n,i){var s;"undefined"!=typeof self&&self,e.exports=(s=i(65043),function(){"use strict";var e={155:function(e){e.exports=s}},n={};function i(s){var a=n[s];if(void 0!==a)return a.exports;var l=n[s]={exports:{}};return e[s](l,l.exports,i),l.exports}i.d=function(e,n){for(var s in n)i.o(n,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};i.r(a),i.d(a,{useReactToPrint:function(){return p}});var l=i(155);function t(e){let{level:n="error",messages:i,suppressErrors:s=!1}=e;s||("error"===n?console.error(i):"warning"===n?console.warn(i):console.debug(i))}function r(e,n){if(n||!e){const e=document.getElementById("printWindow");e&&document.body.removeChild(e)}}function o(e){return e instanceof Error?e:new Error("Unknown Error")}function d(e,n){const{documentTitle:i,onAfterPrint:s,onPrintError:a,preserveAfterPrint:l,print:d,suppressErrors:c}=n;setTimeout((()=>{var n,u;if(e.contentWindow){function h(){null==s||s(),r(l)}if(e.contentWindow.focus(),d)d(e).then(h).catch((e=>{a?a("print",o(e)):t({messages:["An error was thrown by the specified `print` function"],suppressErrors:c})}));else{if(e.contentWindow.print){const m=null!==(u=null===(n=e.contentDocument)||void 0===n?void 0:n.title)&&void 0!==u?u:"",p=e.ownerDocument.title;i&&(e.ownerDocument.title=i,e.contentDocument&&(e.contentDocument.title=i)),e.contentWindow.print(),i&&(e.ownerDocument.title=p,e.contentDocument&&(e.contentDocument.title=m))}else t({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:c});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((e=>{var n,i;return(null!==(i=null!==(n=navigator.userAgent)&&void 0!==n?n:navigator.vendor)&&void 0!==i?i:"opera"in window&&window.opera).match(e)}))?setTimeout(h,500):h()}}else t({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:c})}),500)}function c(e){const n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let s=i.nextNode();for(;s;)n.push(s),s=i.nextNode();return n}function u(e,n,i){const s=c(e),a=c(n);if(s.length===a.length)for(let l=0;l<s.length;l++){const e=s[l],n=a[l],t=e.shadowRoot;if(null!==t){const e=n.attachShadow({mode:t.mode});e.innerHTML=t.innerHTML,u(t,e,i)}}else t({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,n],suppressErrors:i})}const h='\n    @page {\n        /* Remove browser default header (title) and footer (url) */\n        margin: 0;\n    }\n    @media print {\n        body {\n            /* Tell browsers to print background colors */\n            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */\n            print-color-adjust: exact; /* Firefox/Safari */\n            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\n        }\n    }\n';function m(e,n,i,s){var a,l,r,c,m;const{contentNode:p,clonedContentNode:v,clonedImgNodes:g,clonedVideoNodes:x,numResourcesToLoad:b,originalCanvasNodes:j}=i,{bodyClass:f,fonts:y,ignoreGlobalStyles:N,pageStyle:A,nonce:C,suppressErrors:w,copyShadowRoots:S}=s;e.onload=null;const P=null!==(a=e.contentDocument)&&void 0!==a?a:null===(l=e.contentWindow)||void 0===l?void 0:l.document;if(P){const i=P.body.appendChild(v);S&&u(p,i,!!w),y&&((null===(r=e.contentDocument)||void 0===r?void 0:r.fonts)&&(null===(c=e.contentWindow)||void 0===c?void 0:c.FontFace)?y.forEach((i=>{const s=new FontFace(i.family,i.source,{weight:i.weight,style:i.style});e.contentDocument.fonts.add(s),s.loaded.then((()=>{n(s)})).catch((e=>{n(s,["Failed loading the font:",s,"Load error:",o(e)])}))})):(y.forEach((e=>{n(e)})),t({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:w})));const s=null!=A?A:h,a=P.createElement("style");C&&(a.setAttribute("nonce",C),P.head.setAttribute("nonce",C)),a.appendChild(P.createTextNode(s)),P.head.appendChild(a),f&&P.body.classList.add(...f.split(" "));const l=P.querySelectorAll("canvas");for(let e=0;e<j.length;++e){const n=j[e],i=l[e];if(void 0===i){t({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",n],suppressErrors:w});continue}const s=i.getContext("2d");s&&s.drawImage(n,0,0)}for(let e=0;e<g.length;e++){const i=g[e],s=i.getAttribute("src");if(s){const e=new Image;e.onload=()=>{n(i)},e.onerror=(e,s,a,l,t)=>{n(i,["Error loading <img>",i,"Error",t])},e.src=s}else n(i,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',i])}for(let e=0;e<x.length;e++){const i=x[e];i.preload="auto";const s=i.getAttribute("poster");if(s){const e=new Image;e.onload=()=>{n(i)},e.onerror=(e,a,l,t,r)=>{n(i,["Error loading video poster",s,"for video",i,"Error:",r])},e.src=s}else i.readyState>=2?n(i):i.src?(i.onloadeddata=()=>{n(i)},i.onerror=(e,s,a,l,t)=>{n(i,["Error loading video",i,"Error",t])},i.onstalled=()=>{n(i,["Loading video stalled, skipping",i])}):n(i,["Error loading video, `src` is empty",i])}const d="select",b=p.querySelectorAll(d),E=P.querySelectorAll(d);for(let e=0;e<b.length;e++)E[e].value=b[e].value;if(!N){const i=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let s=0,a=i.length;s<a;++s){const a=i[s];if("style"===a.tagName.toLowerCase()){const n=P.createElement(a.tagName),i=a.sheet;if(i){let l="";try{const e=i.cssRules.length;for(let n=0;n<e;++n)"string"==typeof i.cssRules[n].cssText&&(l+=`${i.cssRules[n].cssText}\r\n`)}catch(e){t({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",a,`Original error: ${o(e).message}`],level:"warning"})}n.setAttribute("id",`react-to-print-${s}`),C&&n.setAttribute("nonce",C),n.appendChild(P.createTextNode(l)),P.head.appendChild(n)}}else if(a.getAttribute("href"))if(a.hasAttribute("disabled"))t({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",a],level:"warning"}),n(a);else{const e=P.createElement(a.tagName);for(let n=0,i=a.attributes.length;n<i;++n){const i=a.attributes[n];i&&e.setAttribute(i.nodeName,null!==(m=i.nodeValue)&&void 0!==m?m:"")}e.onload=()=>{n(e)},e.onerror=(i,s,a,l,t)=>{n(e,["Failed to load",e,"Error:",t])},C&&e.setAttribute("nonce",C),P.head.appendChild(e)}else t({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",a],level:"warning"}),n(a)}}}0===b&&d(e,s)}function p(e){let{bodyClass:n,contentRef:i,copyShadowRoots:s,documentTitle:a,fonts:c,ignoreGlobalStyles:u,nonce:h,onAfterPrint:p,onBeforePrint:v,onPrintError:g,pageStyle:x,preserveAfterPrint:b,print:j,suppressErrors:f}=e;return(0,l.useCallback)((e=>{function l(){const l={bodyClass:n,contentRef:i,copyShadowRoots:s,documentTitle:a,fonts:c,ignoreGlobalStyles:u,nonce:h,onAfterPrint:p,onBeforePrint:v,onPrintError:g,pageStyle:x,preserveAfterPrint:b,print:j,suppressErrors:f},r=function(){const e=document.createElement("iframe");return e.width=`${document.documentElement.clientWidth}px`,e.height=`${document.documentElement.clientHeight}px`,e.style.position="absolute",e.style.top=`-${document.documentElement.clientHeight+100}px`,e.style.left=`-${document.documentElement.clientWidth+100}px`,e.id="printWindow",e.srcdoc="<!DOCTYPE html>",e}(),o=function(e,n){const{contentRef:i,fonts:s,ignoreGlobalStyles:a,suppressErrors:l}=n,r=function(e){let{contentRef:n,optionalContent:i,suppressErrors:s}=e;return!i||i instanceof Event||(n&&t({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),"function"!=typeof i)?n?n.current:void t({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:s}):i()}({contentRef:i,optionalContent:e,suppressErrors:l});if(!r)return;const o=r.cloneNode(!0),d=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),c=o.querySelectorAll("img"),u=o.querySelectorAll("video"),h=s?s.length:0;return{contentNode:r,clonedContentNode:o,clonedImgNodes:c,clonedVideoNodes:u,numResourcesToLoad:(a?0:d.length)+c.length+u.length+h,originalCanvasNodes:r.querySelectorAll("canvas")}}(e,l);if(!o)return void t({messages:["There is nothing to print"],suppressErrors:f});const y=function(e,n,i){const{suppressErrors:s}=e,a=[],l=[];return function(r,o){a.includes(r)?t({level:"debug",messages:["Tried to mark a resource that has already been handled",r],suppressErrors:s}):(o?(t({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...o],suppressErrors:s}),l.push(r)):a.push(r),a.length+l.length===n&&d(i,e))}}(l,o.numResourcesToLoad,r);!function(e,n,i,s){e.onload=()=>{m(e,n,i,s)},document.body.appendChild(e)}(r,y,o,l)}r(b,!0),v?v().then((()=>{l()})).catch((e=>{null==g||g("onBeforePrint",o(e))})):l()}),[n,i,s,a,c,u,h,p,v,g,x,b,j,f])}return a}())}}]);
//# sourceMappingURL=5228.e1f6fee4.chunk.js.map